{"ast":null,"code":"import React,{useState,useEffect}from'react';import{vehicleService}from'../../services/vehicleService';import{Box,Button,Typography,Paper,Table,TableBody,TableCell,TableContainer,TableHead,TableRow,Chip,IconButton,Dialog,DialogTitle,DialogContent,DialogActions,TextField,Grid,Alert,CircularProgress,List,ListItem,ListItemText,ListItemIcon,Stack}from'@mui/material';import{Add as AddIcon,Edit as EditIcon,Delete as DeleteIcon,Build as BuildIcon,DirectionsCar as CarIcon,OilBarrel as OilIcon,TireRepair as TireIcon,BatteryChargingFull as BatteryIcon,LocalGasStation as GasIcon,Warning as WarningIcon,CheckCircle as CheckCircleIcon,Error as ErrorIcon}from'@mui/icons-material';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const VehicleMaintenance=_ref=>{let{vehicle}=_ref;const[maintenanceRecords,setMaintenanceRecords]=useState([]);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const[showDialog,setShowDialog]=useState(false);const[selectedRecord,setSelectedRecord]=useState(null);const[formData,setFormData]=useState({date:new Date().toISOString().split('T')[0],type:'routine',description:'',mileage:vehicle.odometer,cost:0,provider:'',nextDueDate:'',notes:''});useEffect(()=>{loadMaintenanceRecords();},[vehicle.id]);const loadMaintenanceRecords=async()=>{try{setLoading(true);setError(null);const records=await vehicleService.getMaintenanceRecords(vehicle.id);setMaintenanceRecords(records);}catch(err){setError(err.message||'Erreur lors du chargement des records de maintenance');console.error('Erreur:',err);}finally{setLoading(false);}};const handleOpenDialog=record=>{if(record){setSelectedRecord(record);setFormData(record);}else{setSelectedRecord(null);setFormData({date:new Date().toISOString().split('T')[0],type:'routine',description:'',mileage:vehicle.odometer,cost:0,provider:'',nextDueDate:'',notes:''});}setShowDialog(true);};const handleCloseDialog=()=>{setShowDialog(false);setSelectedRecord(null);setFormData({date:new Date().toISOString().split('T')[0],type:'routine',description:'',mileage:vehicle.odometer,cost:0,provider:'',nextDueDate:'',notes:''});};const handleInputChange=e=>{const{name,value}=e.target;setFormData(prev=>({...prev,[name]:value}));};const handleSubmit=async()=>{try{if(selectedRecord){await vehicleService.updateMaintenanceRecord(vehicle.id,selectedRecord.id,formData);}else{await vehicleService.addMaintenanceRecord(vehicle.id,formData);}handleCloseDialog();loadMaintenanceRecords();}catch(err){setError(err.message||'Erreur lors de la sauvegarde du record de maintenance');console.error('Erreur:',err);}};const handleDelete=async recordId=>{if(window.confirm('Êtes-vous sûr de vouloir supprimer ce record de maintenance ?')){try{await vehicleService.deleteMaintenanceRecord(vehicle.id,recordId);loadMaintenanceRecords();}catch(err){setError(err.message||'Erreur lors de la suppression du record de maintenance');console.error('Erreur:',err);}}};const getMaintenanceTypeIcon=type=>{switch(type){case'routine':return/*#__PURE__*/_jsx(BuildIcon,{});case'repair':return/*#__PURE__*/_jsx(CarIcon,{});case'oil':return/*#__PURE__*/_jsx(OilIcon,{});case'tire':return/*#__PURE__*/_jsx(TireIcon,{});case'battery':return/*#__PURE__*/_jsx(BatteryIcon,{});case'fuel':return/*#__PURE__*/_jsx(GasIcon,{});default:return/*#__PURE__*/_jsx(BuildIcon,{});}};const getMaintenanceTypeLabel=type=>{switch(type){case'routine':return'Maintenance routinière';case'repair':return'Réparation';case'oil':return'Vidange';case'tire':return'Pneus';case'battery':return'Batterie';case'fuel':return'Carburant';default:return type;}};const getNextDueStatus=nextDueDate=>{if(!nextDueDate)return null;const dueDate=new Date(nextDueDate);const today=new Date();const daysUntilDue=Math.ceil((dueDate.getTime()-today.getTime())/(1000*60*60*24));if(daysUntilDue<0){return{color:'error',label:'En retard'};}else if(daysUntilDue<=7){return{color:'warning',label:'Bientôt dû'};}else{return{color:'success',label:'À jour'};}};return/*#__PURE__*/_jsxs(Box,{children:[/*#__PURE__*/_jsxs(Box,{sx:{display:'flex',justifyContent:'space-between',alignItems:'center',mb:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",children:\"Maintenance du v\\xE9hicule\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",startIcon:/*#__PURE__*/_jsx(AddIcon,{}),onClick:()=>handleOpenDialog(),children:\"Nouveau record\"})]}),error&&/*#__PURE__*/_jsx(Alert,{severity:\"error\",sx:{mb:2},children:error}),loading&&/*#__PURE__*/_jsx(Box,{sx:{display:'flex',justifyContent:'center',my:2},children:/*#__PURE__*/_jsx(CircularProgress,{})}),maintenanceRecords.length===0?/*#__PURE__*/_jsx(Alert,{severity:\"info\",children:\"Aucun record de maintenance pour ce v\\xE9hicule. Utilisez le bouton \\\"Nouveau record\\\" pour ajouter un record.\"}):/*#__PURE__*/_jsx(TableContainer,{component:Paper,variant:\"outlined\",children:/*#__PURE__*/_jsxs(Table,{children:[/*#__PURE__*/_jsx(TableHead,{children:/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:\"Date\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Type\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Description\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Kilom\\xE9trage\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Co\\xFBt\"}),/*#__PURE__*/_jsx(TableCell,{children:\"Prochain rendez-vous\"}),/*#__PURE__*/_jsx(TableCell,{align:\"right\",children:\"Actions\"})]})}),/*#__PURE__*/_jsx(TableBody,{children:maintenanceRecords.map(record=>{var _getNextDueStatus;return/*#__PURE__*/_jsxs(TableRow,{children:[/*#__PURE__*/_jsx(TableCell,{children:new Date(record.date).toLocaleDateString()}),/*#__PURE__*/_jsx(TableCell,{children:/*#__PURE__*/_jsxs(Stack,{direction:\"row\",spacing:1,alignItems:\"center\",children:[getMaintenanceTypeIcon(record.type),/*#__PURE__*/_jsx(Typography,{variant:\"body2\",children:getMaintenanceTypeLabel(record.type)})]})}),/*#__PURE__*/_jsx(TableCell,{children:record.description}),/*#__PURE__*/_jsxs(TableCell,{children:[record.mileage.toLocaleString(),\" km\"]}),/*#__PURE__*/_jsxs(TableCell,{children:[record.cost.toFixed(2),\" \\u20AC\"]}),/*#__PURE__*/_jsx(TableCell,{children:record.nextDueDate&&/*#__PURE__*/_jsx(Chip,{label:new Date(record.nextDueDate).toLocaleDateString(),color:(_getNextDueStatus=getNextDueStatus(record.nextDueDate))===null||_getNextDueStatus===void 0?void 0:_getNextDueStatus.color,size:\"small\"})}),/*#__PURE__*/_jsxs(TableCell,{align:\"right\",children:[/*#__PURE__*/_jsx(IconButton,{size:\"small\",onClick:()=>handleOpenDialog(record),title:\"\\xC9diter\",children:/*#__PURE__*/_jsx(EditIcon,{fontSize:\"small\"})}),/*#__PURE__*/_jsx(IconButton,{size:\"small\",onClick:()=>handleDelete(record.id),title:\"Supprimer\",color:\"error\",children:/*#__PURE__*/_jsx(DeleteIcon,{fontSize:\"small\"})})]})]},record.id);})})]})}),/*#__PURE__*/_jsxs(Dialog,{open:showDialog,onClose:handleCloseDialog,maxWidth:\"md\",fullWidth:true,children:[/*#__PURE__*/_jsx(DialogTitle,{children:selectedRecord?'Modifier le record de maintenance':'Nouveau record de maintenance'}),/*#__PURE__*/_jsx(DialogContent,{dividers:true,children:/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Date\",type:\"date\",name:\"date\",value:formData.date,onChange:handleInputChange,InputLabelProps:{shrink:true}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsxs(TextField,{fullWidth:true,label:\"Type\",name:\"type\",value:formData.type,onChange:handleInputChange,select:true,SelectProps:{native:true},children:[/*#__PURE__*/_jsx(\"option\",{value:\"routine\",children:\"Maintenance routini\\xE8re\"}),/*#__PURE__*/_jsx(\"option\",{value:\"repair\",children:\"R\\xE9paration\"}),/*#__PURE__*/_jsx(\"option\",{value:\"oil\",children:\"Vidange\"}),/*#__PURE__*/_jsx(\"option\",{value:\"tire\",children:\"Pneus\"}),/*#__PURE__*/_jsx(\"option\",{value:\"battery\",children:\"Batterie\"}),/*#__PURE__*/_jsx(\"option\",{value:\"fuel\",children:\"Carburant\"})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Description\",name:\"description\",value:formData.description,onChange:handleInputChange,multiline:true,rows:3})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Kilom\\xE9trage\",name:\"mileage\",type:\"number\",value:formData.mileage,onChange:handleInputChange,InputProps:{endAdornment:'km'}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Co\\xFBt\",name:\"cost\",type:\"number\",value:formData.cost,onChange:handleInputChange,InputProps:{endAdornment:'€'}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Prestataire\",name:\"provider\",value:formData.provider,onChange:handleInputChange})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:6,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Prochain rendez-vous\",type:\"date\",name:\"nextDueDate\",value:formData.nextDueDate,onChange:handleInputChange,InputLabelProps:{shrink:true}})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,children:/*#__PURE__*/_jsx(TextField,{fullWidth:true,label:\"Notes\",name:\"notes\",value:formData.notes,onChange:handleInputChange,multiline:true,rows:3})})]})}),/*#__PURE__*/_jsxs(DialogActions,{children:[/*#__PURE__*/_jsx(Button,{onClick:handleCloseDialog,children:\"Annuler\"}),/*#__PURE__*/_jsx(Button,{onClick:handleSubmit,variant:\"contained\",children:selectedRecord?'Modifier':'Ajouter'})]})]}),/*#__PURE__*/_jsxs(Box,{sx:{mt:4},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h6\",gutterBottom:true,children:\"R\\xE9sum\\xE9 de la maintenance\"}),/*#__PURE__*/_jsxs(Grid,{container:true,spacing:3,children:[/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:4,children:/*#__PURE__*/_jsxs(Paper,{variant:\"outlined\",sx:{p:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",gutterBottom:true,children:\"Derni\\xE8re maintenance\"}),maintenanceRecords.length>0?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",children:[\"Date: \",new Date(maintenanceRecords[0].date).toLocaleDateString()]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",children:[\"Type: \",getMaintenanceTypeLabel(maintenanceRecords[0].type)]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",children:[\"Kilom\\xE9trage: \",maintenanceRecords[0].mileage.toLocaleString(),\" km\"]})]}):/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",children:\"Aucune maintenance enregistr\\xE9e\"})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:4,children:/*#__PURE__*/_jsxs(Paper,{variant:\"outlined\",sx:{p:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",gutterBottom:true,children:\"Prochain rendez-vous\"}),maintenanceRecords.some(record=>record.nextDueDate)?/*#__PURE__*/_jsx(List,{dense:true,children:maintenanceRecords.filter(record=>record.nextDueDate).sort((a,b)=>new Date(a.nextDueDate).getTime()-new Date(b.nextDueDate).getTime()).slice(0,3).map(record=>{const status=getNextDueStatus(record.nextDueDate);return/*#__PURE__*/_jsxs(ListItem,{children:[/*#__PURE__*/_jsx(ListItemIcon,{children:(status===null||status===void 0?void 0:status.color)==='error'?/*#__PURE__*/_jsx(ErrorIcon,{color:\"error\"}):(status===null||status===void 0?void 0:status.color)==='warning'?/*#__PURE__*/_jsx(WarningIcon,{color:\"warning\"}):/*#__PURE__*/_jsx(CheckCircleIcon,{color:\"success\"})}),/*#__PURE__*/_jsx(ListItemText,{primary:getMaintenanceTypeLabel(record.type),secondary:`${new Date(record.nextDueDate).toLocaleDateString()} (${status===null||status===void 0?void 0:status.label})`})]},record.id);})}):/*#__PURE__*/_jsx(Typography,{variant:\"body2\",color:\"text.secondary\",children:\"Aucun rendez-vous pr\\xE9vu\"})]})}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,md:4,children:/*#__PURE__*/_jsxs(Paper,{variant:\"outlined\",sx:{p:2},children:[/*#__PURE__*/_jsx(Typography,{variant:\"subtitle2\",gutterBottom:true,children:\"Co\\xFBts de maintenance\"}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",children:[\"Total: \",maintenanceRecords.reduce((sum,record)=>sum+record.cost,0).toFixed(2),\" \\u20AC\"]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body2\",color:\"text.secondary\",children:[\"Moyenne par maintenance: \",(maintenanceRecords.reduce((sum,record)=>sum+record.cost,0)/Math.max(1,maintenanceRecords.length)).toFixed(2),\" \\u20AC\"]})]})})]})]})]});};export default VehicleMaintenance;","map":{"version":3,"names":["React","useState","useEffect","vehicleService","Box","Button","Typography","Paper","Table","TableBody","TableCell","TableContainer","TableHead","TableRow","Chip","IconButton","Dialog","DialogTitle","DialogContent","DialogActions","TextField","Grid","Alert","CircularProgress","List","ListItem","ListItemText","ListItemIcon","Stack","Add","AddIcon","Edit","EditIcon","Delete","DeleteIcon","Build","BuildIcon","DirectionsCar","CarIcon","OilBarrel","OilIcon","TireRepair","TireIcon","BatteryChargingFull","BatteryIcon","LocalGasStation","GasIcon","Warning","WarningIcon","CheckCircle","CheckCircleIcon","Error","ErrorIcon","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","VehicleMaintenance","_ref","vehicle","maintenanceRecords","setMaintenanceRecords","loading","setLoading","error","setError","showDialog","setShowDialog","selectedRecord","setSelectedRecord","formData","setFormData","date","Date","toISOString","split","type","description","mileage","odometer","cost","provider","nextDueDate","notes","loadMaintenanceRecords","id","records","getMaintenanceRecords","err","message","console","handleOpenDialog","record","handleCloseDialog","handleInputChange","e","name","value","target","prev","handleSubmit","updateMaintenanceRecord","addMaintenanceRecord","handleDelete","recordId","window","confirm","deleteMaintenanceRecord","getMaintenanceTypeIcon","getMaintenanceTypeLabel","getNextDueStatus","dueDate","today","daysUntilDue","Math","ceil","getTime","color","label","children","sx","display","justifyContent","alignItems","mb","variant","startIcon","onClick","severity","my","length","component","align","map","_getNextDueStatus","toLocaleDateString","direction","spacing","toLocaleString","toFixed","size","title","fontSize","open","onClose","maxWidth","fullWidth","dividers","container","item","xs","sm","onChange","InputLabelProps","shrink","select","SelectProps","native","multiline","rows","InputProps","endAdornment","mt","gutterBottom","md","p","some","dense","filter","sort","a","b","slice","status","primary","secondary","reduce","sum","max"],"sources":["C:/Users/LS_110/Documents/GitHub/inovie-SCAN-web-main/src/components/vehicles/VehicleMaintenance.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Vehicle, MaintenanceRecord } from '../../types/Vehicle';\r\nimport { vehicleService } from '../../services/vehicleService';\r\nimport {\r\n  Box,\r\n  Button,\r\n  Typography,\r\n  Paper,\r\n  Table,\r\n  TableBody,\r\n  TableCell,\r\n  TableContainer,\r\n  TableHead,\r\n  TableRow,\r\n  Chip,\r\n  IconButton,\r\n  Dialog,\r\n  DialogTitle,\r\n  DialogContent,\r\n  DialogActions,\r\n  TextField,\r\n  Grid,\r\n  Alert,\r\n  CircularProgress,\r\n  Divider,\r\n  List,\r\n  ListItem,\r\n  ListItemText,\r\n  ListItemIcon,\r\n  Stack,\r\n} from '@mui/material';\r\nimport {\r\n  Add as AddIcon,\r\n  Edit as EditIcon,\r\n  Delete as DeleteIcon,\r\n  Build as BuildIcon,\r\n  DirectionsCar as CarIcon,\r\n  OilBarrel as OilIcon,\r\n  TireRepair as TireIcon,\r\n  BatteryChargingFull as BatteryIcon,\r\n  LocalGasStation as GasIcon,\r\n  Warning as WarningIcon,\r\n  CheckCircle as CheckCircleIcon,\r\n  Error as ErrorIcon,\r\n} from '@mui/icons-material';\r\n\r\ninterface VehicleMaintenanceProps {\r\n  vehicle: Vehicle;\r\n}\r\n\r\nconst VehicleMaintenance: React.FC<VehicleMaintenanceProps> = ({ vehicle }) => {\r\n  const [maintenanceRecords, setMaintenanceRecords] = useState<MaintenanceRecord[]>([]);\r\n  const [loading, setLoading] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const [showDialog, setShowDialog] = useState(false);\r\n  const [selectedRecord, setSelectedRecord] = useState<MaintenanceRecord | null>(null);\r\n  const [formData, setFormData] = useState<Partial<MaintenanceRecord>>({\r\n    date: new Date().toISOString().split('T')[0],\r\n    type: 'routine',\r\n    description: '',\r\n    mileage: vehicle.odometer,\r\n    cost: 0,\r\n    provider: '',\r\n    nextDueDate: '',\r\n    notes: '',\r\n  });\r\n  \r\n  useEffect(() => {\r\n    loadMaintenanceRecords();\r\n  }, [vehicle.id]);\r\n  \r\n  const loadMaintenanceRecords = async () => {\r\n    try {\r\n      setLoading(true);\r\n      setError(null);\r\n      const records = await vehicleService.getMaintenanceRecords(vehicle.id);\r\n      setMaintenanceRecords(records);\r\n    } catch (err: any) {\r\n      setError(err.message || 'Erreur lors du chargement des records de maintenance');\r\n      console.error('Erreur:', err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n  \r\n  const handleOpenDialog = (record?: MaintenanceRecord) => {\r\n    if (record) {\r\n      setSelectedRecord(record);\r\n      setFormData(record);\r\n    } else {\r\n      setSelectedRecord(null);\r\n      setFormData({\r\n        date: new Date().toISOString().split('T')[0],\r\n        type: 'routine',\r\n        description: '',\r\n        mileage: vehicle.odometer,\r\n        cost: 0,\r\n        provider: '',\r\n        nextDueDate: '',\r\n        notes: '',\r\n      });\r\n    }\r\n    setShowDialog(true);\r\n  };\r\n  \r\n  const handleCloseDialog = () => {\r\n    setShowDialog(false);\r\n    setSelectedRecord(null);\r\n    setFormData({\r\n      date: new Date().toISOString().split('T')[0],\r\n      type: 'routine',\r\n      description: '',\r\n      mileage: vehicle.odometer,\r\n      cost: 0,\r\n      provider: '',\r\n      nextDueDate: '',\r\n      notes: '',\r\n    });\r\n  };\r\n  \r\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const { name, value } = e.target;\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [name]: value\r\n    }));\r\n  };\r\n  \r\n  const handleSubmit = async () => {\r\n    try {\r\n      if (selectedRecord) {\r\n        await vehicleService.updateMaintenanceRecord(vehicle.id, selectedRecord.id, formData as MaintenanceRecord);\r\n      } else {\r\n        await vehicleService.addMaintenanceRecord(vehicle.id, formData as MaintenanceRecord);\r\n      }\r\n      handleCloseDialog();\r\n      loadMaintenanceRecords();\r\n    } catch (err: any) {\r\n      setError(err.message || 'Erreur lors de la sauvegarde du record de maintenance');\r\n      console.error('Erreur:', err);\r\n    }\r\n  };\r\n  \r\n  const handleDelete = async (recordId: string) => {\r\n    if (window.confirm('Êtes-vous sûr de vouloir supprimer ce record de maintenance ?')) {\r\n      try {\r\n        await vehicleService.deleteMaintenanceRecord(vehicle.id, recordId);\r\n        loadMaintenanceRecords();\r\n      } catch (err: any) {\r\n        setError(err.message || 'Erreur lors de la suppression du record de maintenance');\r\n        console.error('Erreur:', err);\r\n      }\r\n    }\r\n  };\r\n  \r\n  const getMaintenanceTypeIcon = (type: string) => {\r\n    switch (type) {\r\n      case 'routine':\r\n        return <BuildIcon />;\r\n      case 'repair':\r\n        return <CarIcon />;\r\n      case 'oil':\r\n        return <OilIcon />;\r\n      case 'tire':\r\n        return <TireIcon />;\r\n      case 'battery':\r\n        return <BatteryIcon />;\r\n      case 'fuel':\r\n        return <GasIcon />;\r\n      default:\r\n        return <BuildIcon />;\r\n    }\r\n  };\r\n  \r\n  const getMaintenanceTypeLabel = (type: string) => {\r\n    switch (type) {\r\n      case 'routine':\r\n        return 'Maintenance routinière';\r\n      case 'repair':\r\n        return 'Réparation';\r\n      case 'oil':\r\n        return 'Vidange';\r\n      case 'tire':\r\n        return 'Pneus';\r\n      case 'battery':\r\n        return 'Batterie';\r\n      case 'fuel':\r\n        return 'Carburant';\r\n      default:\r\n        return type;\r\n    }\r\n  };\r\n  \r\n  const getNextDueStatus = (nextDueDate: string) => {\r\n    if (!nextDueDate) return null;\r\n    \r\n    const dueDate = new Date(nextDueDate);\r\n    const today = new Date();\r\n    const daysUntilDue = Math.ceil((dueDate.getTime() - today.getTime()) / (1000 * 60 * 60 * 24));\r\n    \r\n    if (daysUntilDue < 0) {\r\n      return { color: 'error', label: 'En retard' };\r\n    } else if (daysUntilDue <= 7) {\r\n      return { color: 'warning', label: 'Bientôt dû' };\r\n    } else {\r\n      return { color: 'success', label: 'À jour' };\r\n    }\r\n  };\r\n  \r\n  return (\r\n    <Box>\r\n      <Box sx={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center', mb: 2 }}>\r\n        <Typography variant=\"h6\">Maintenance du véhicule</Typography>\r\n        <Button \r\n          variant=\"contained\" \r\n          startIcon={<AddIcon />}\r\n          onClick={() => handleOpenDialog()}\r\n        >\r\n          Nouveau record\r\n        </Button>\r\n      </Box>\r\n      \r\n      {error && (\r\n        <Alert severity=\"error\" sx={{ mb: 2 }}>\r\n          {error}\r\n        </Alert>\r\n      )}\r\n      \r\n      {loading && (\r\n        <Box sx={{ display: 'flex', justifyContent: 'center', my: 2 }}>\r\n          <CircularProgress />\r\n        </Box>\r\n      )}\r\n      \r\n      {maintenanceRecords.length === 0 ? (\r\n        <Alert severity=\"info\">\r\n          Aucun record de maintenance pour ce véhicule. Utilisez le bouton \"Nouveau record\" pour ajouter un record.\r\n        </Alert>\r\n      ) : (\r\n        <TableContainer component={Paper} variant=\"outlined\">\r\n          <Table>\r\n            <TableHead>\r\n              <TableRow>\r\n                <TableCell>Date</TableCell>\r\n                <TableCell>Type</TableCell>\r\n                <TableCell>Description</TableCell>\r\n                <TableCell>Kilométrage</TableCell>\r\n                <TableCell>Coût</TableCell>\r\n                <TableCell>Prochain rendez-vous</TableCell>\r\n                <TableCell align=\"right\">Actions</TableCell>\r\n              </TableRow>\r\n            </TableHead>\r\n            <TableBody>\r\n              {maintenanceRecords.map((record) => (\r\n                <TableRow key={record.id}>\r\n                  <TableCell>{new Date(record.date).toLocaleDateString()}</TableCell>\r\n                  <TableCell>\r\n                    <Stack direction=\"row\" spacing={1} alignItems=\"center\">\r\n                      {getMaintenanceTypeIcon(record.type)}\r\n                      <Typography variant=\"body2\">\r\n                        {getMaintenanceTypeLabel(record.type)}\r\n                      </Typography>\r\n                    </Stack>\r\n                  </TableCell>\r\n                  <TableCell>{record.description}</TableCell>\r\n                  <TableCell>{record.mileage.toLocaleString()} km</TableCell>\r\n                  <TableCell>{record.cost.toFixed(2)} €</TableCell>\r\n                  <TableCell>\r\n                    {record.nextDueDate && (\r\n                      <Chip \r\n                        label={new Date(record.nextDueDate).toLocaleDateString()}\r\n                        color={getNextDueStatus(record.nextDueDate)?.color as any}\r\n                        size=\"small\"\r\n                      />\r\n                    )}\r\n                  </TableCell>\r\n                  <TableCell align=\"right\">\r\n                    <IconButton \r\n                      size=\"small\"\r\n                      onClick={() => handleOpenDialog(record)}\r\n                      title=\"Éditer\"\r\n                    >\r\n                      <EditIcon fontSize=\"small\" />\r\n                    </IconButton>\r\n                    <IconButton \r\n                      size=\"small\"\r\n                      onClick={() => handleDelete(record.id)}\r\n                      title=\"Supprimer\"\r\n                      color=\"error\"\r\n                    >\r\n                      <DeleteIcon fontSize=\"small\" />\r\n                    </IconButton>\r\n                  </TableCell>\r\n                </TableRow>\r\n              ))}\r\n            </TableBody>\r\n          </Table>\r\n        </TableContainer>\r\n      )}\r\n      \r\n      {/* Dialog d'ajout/modification */}\r\n      <Dialog \r\n        open={showDialog} \r\n        onClose={handleCloseDialog}\r\n        maxWidth=\"md\"\r\n        fullWidth\r\n      >\r\n        <DialogTitle>\r\n          {selectedRecord ? 'Modifier le record de maintenance' : 'Nouveau record de maintenance'}\r\n        </DialogTitle>\r\n        <DialogContent dividers>\r\n          <Grid container spacing={3}>\r\n            <Grid item xs={12} sm={6}>\r\n              <TextField\r\n                fullWidth\r\n                label=\"Date\"\r\n                type=\"date\"\r\n                name=\"date\"\r\n                value={formData.date}\r\n                onChange={handleInputChange}\r\n                InputLabelProps={{ shrink: true }}\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12} sm={6}>\r\n              <TextField\r\n                fullWidth\r\n                label=\"Type\"\r\n                name=\"type\"\r\n                value={formData.type}\r\n                onChange={handleInputChange}\r\n                select\r\n                SelectProps={{ native: true }}\r\n              >\r\n                <option value=\"routine\">Maintenance routinière</option>\r\n                <option value=\"repair\">Réparation</option>\r\n                <option value=\"oil\">Vidange</option>\r\n                <option value=\"tire\">Pneus</option>\r\n                <option value=\"battery\">Batterie</option>\r\n                <option value=\"fuel\">Carburant</option>\r\n              </TextField>\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                fullWidth\r\n                label=\"Description\"\r\n                name=\"description\"\r\n                value={formData.description}\r\n                onChange={handleInputChange}\r\n                multiline\r\n                rows={3}\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12} sm={6}>\r\n              <TextField\r\n                fullWidth\r\n                label=\"Kilométrage\"\r\n                name=\"mileage\"\r\n                type=\"number\"\r\n                value={formData.mileage}\r\n                onChange={handleInputChange}\r\n                InputProps={{ endAdornment: 'km' }}\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12} sm={6}>\r\n              <TextField\r\n                fullWidth\r\n                label=\"Coût\"\r\n                name=\"cost\"\r\n                type=\"number\"\r\n                value={formData.cost}\r\n                onChange={handleInputChange}\r\n                InputProps={{ endAdornment: '€' }}\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12} sm={6}>\r\n              <TextField\r\n                fullWidth\r\n                label=\"Prestataire\"\r\n                name=\"provider\"\r\n                value={formData.provider}\r\n                onChange={handleInputChange}\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12} sm={6}>\r\n              <TextField\r\n                fullWidth\r\n                label=\"Prochain rendez-vous\"\r\n                type=\"date\"\r\n                name=\"nextDueDate\"\r\n                value={formData.nextDueDate}\r\n                onChange={handleInputChange}\r\n                InputLabelProps={{ shrink: true }}\r\n              />\r\n            </Grid>\r\n            <Grid item xs={12}>\r\n              <TextField\r\n                fullWidth\r\n                label=\"Notes\"\r\n                name=\"notes\"\r\n                value={formData.notes}\r\n                onChange={handleInputChange}\r\n                multiline\r\n                rows={3}\r\n              />\r\n            </Grid>\r\n          </Grid>\r\n        </DialogContent>\r\n        <DialogActions>\r\n          <Button onClick={handleCloseDialog}>Annuler</Button>\r\n          <Button onClick={handleSubmit} variant=\"contained\">\r\n            {selectedRecord ? 'Modifier' : 'Ajouter'}\r\n          </Button>\r\n        </DialogActions>\r\n      </Dialog>\r\n      \r\n      {/* Résumé de la maintenance */}\r\n      <Box sx={{ mt: 4 }}>\r\n        <Typography variant=\"h6\" gutterBottom>\r\n          Résumé de la maintenance\r\n        </Typography>\r\n        <Grid container spacing={3}>\r\n          <Grid item xs={12} md={4}>\r\n            <Paper variant=\"outlined\" sx={{ p: 2 }}>\r\n              <Typography variant=\"subtitle2\" gutterBottom>\r\n                Dernière maintenance\r\n              </Typography>\r\n              {maintenanceRecords.length > 0 ? (\r\n                <>\r\n                  <Typography variant=\"body2\" color=\"text.secondary\">\r\n                    Date: {new Date(maintenanceRecords[0].date).toLocaleDateString()}\r\n                  </Typography>\r\n                  <Typography variant=\"body2\" color=\"text.secondary\">\r\n                    Type: {getMaintenanceTypeLabel(maintenanceRecords[0].type)}\r\n                  </Typography>\r\n                  <Typography variant=\"body2\" color=\"text.secondary\">\r\n                    Kilométrage: {maintenanceRecords[0].mileage.toLocaleString()} km\r\n                  </Typography>\r\n                </>\r\n              ) : (\r\n                <Typography variant=\"body2\" color=\"text.secondary\">\r\n                  Aucune maintenance enregistrée\r\n                </Typography>\r\n              )}\r\n            </Paper>\r\n          </Grid>\r\n          \r\n          <Grid item xs={12} md={4}>\r\n            <Paper variant=\"outlined\" sx={{ p: 2 }}>\r\n              <Typography variant=\"subtitle2\" gutterBottom>\r\n                Prochain rendez-vous\r\n              </Typography>\r\n              {maintenanceRecords.some(record => record.nextDueDate) ? (\r\n                <List dense>\r\n                  {maintenanceRecords\r\n                    .filter(record => record.nextDueDate)\r\n                    .sort((a, b) => new Date(a.nextDueDate!).getTime() - new Date(b.nextDueDate!).getTime())\r\n                    .slice(0, 3)\r\n                    .map(record => {\r\n                      const status = getNextDueStatus(record.nextDueDate!);\r\n                      return (\r\n                        <ListItem key={record.id}>\r\n                          <ListItemIcon>\r\n                            {status?.color === 'error' ? <ErrorIcon color=\"error\" /> :\r\n                             status?.color === 'warning' ? <WarningIcon color=\"warning\" /> :\r\n                             <CheckCircleIcon color=\"success\" />}\r\n                          </ListItemIcon>\r\n                          <ListItemText \r\n                            primary={getMaintenanceTypeLabel(record.type)}\r\n                            secondary={`${new Date(record.nextDueDate!).toLocaleDateString()} (${status?.label})`}\r\n                          />\r\n                        </ListItem>\r\n                      );\r\n                    })}\r\n                </List>\r\n              ) : (\r\n                <Typography variant=\"body2\" color=\"text.secondary\">\r\n                  Aucun rendez-vous prévu\r\n                </Typography>\r\n              )}\r\n            </Paper>\r\n          </Grid>\r\n          \r\n          <Grid item xs={12} md={4}>\r\n            <Paper variant=\"outlined\" sx={{ p: 2 }}>\r\n              <Typography variant=\"subtitle2\" gutterBottom>\r\n                Coûts de maintenance\r\n              </Typography>\r\n              <Typography variant=\"body2\" color=\"text.secondary\">\r\n                Total: {maintenanceRecords.reduce((sum, record) => sum + record.cost, 0).toFixed(2)} €\r\n              </Typography>\r\n              <Typography variant=\"body2\" color=\"text.secondary\">\r\n                Moyenne par maintenance: {(maintenanceRecords.reduce((sum, record) => sum + record.cost, 0) / Math.max(1, maintenanceRecords.length)).toFixed(2)} €\r\n              </Typography>\r\n            </Paper>\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default VehicleMaintenance; \r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}