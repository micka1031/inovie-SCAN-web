{"ast":null,"code":"import React,{useState,useEffect}from'react';import{db}from'../config/firebase';import{collection,getDocs,addDoc,updateDoc,deleteDoc,doc}from'firebase/firestore';import DatePicker from'react-datepicker';import{registerLocale}from'react-datepicker';import{fr}from'date-fns/locale';import'react-datepicker/dist/react-datepicker.css';import'./EditMode.css';import'./Vehicules.css';import{usePoles}from'../services/PoleService';import PoleSelector from'./PoleSelector';import PoleFilter from'./PoleFilter';// Enregistrer la locale française\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";registerLocale('fr',fr);const Vehicules=()=>{const[vehicules,setVehicules]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);// État pour le modal\nconst[isModalOpen,setIsModalOpen]=useState(false);const[isEditing,setIsEditing]=useState(false);const[currentVehicule,setCurrentVehicule]=useState({immatriculation:'',marque:'',modele:'',type:'Voiture',annee:new Date().getFullYear(),statut:'actif',coursierAssigne:'',kilometrage:0});// État pour le mode édition et la sélection multiple\nconst[editMode,setEditMode]=useState(false);const[selectedVehicules,setSelectedVehicules]=useState([]);const[editingVehicules,setEditingVehicules]=useState({});const[selectAll,setSelectAll]=useState(false);// Ajouter un nouvel état pour les nouveaux véhicules temporaires\nconst[newVehicules,setNewVehicules]=useState([]);// État pour la recherche rapide\nconst[quickSearch,setQuickSearch]=useState('');const[filteredVehicules,setFilteredVehicules]=useState([]);// Ajout du filtre par pôle\nconst[selectedPole,setSelectedPole]=useState('');// Utilisation du hook usePoles\nconst{poles}=usePoles();// Fonction pour obtenir le nom du pôle\nconst getPoleNameById=poleId=>{if(!poleId)return'-';const pole=poles.find(p=>p.id===poleId);return pole?pole.nom:poleId;};useEffect(()=>{fetchVehicules();},[]);// Effet pour gérer la sélection/désélection de tous les véhicules\nuseEffect(()=>{if(selectAll){setSelectedVehicules(vehicules.map(vehicule=>vehicule.id));}else if(selectedVehicules.length===vehicules.length){// Si tous les véhicules sont sélectionnés mais que selectAll est false, cela signifie que l'utilisateur a désélectionné\nsetSelectedVehicules([]);}},[selectAll]);// Initialiser les véhicules filtrés au chargement\nuseEffect(()=>{setFilteredVehicules(vehicules);},[vehicules]);// Effet pour filtrer les véhicules en fonction de la recherche rapide et du pôle sélectionné\nuseEffect(()=>{let results=vehicules;// Filtrer par pôle si un pôle est sélectionné\nif(selectedPole){results=results.filter(vehicule=>vehicule.pole===selectedPole);}// Ensuite filtrer par recherche rapide\nif(quickSearch.trim()){const searchTerm=quickSearch.toLowerCase().trim();results=results.filter(vehicule=>{// Rechercher dans tous les champs textuels du véhicule\nreturn vehicule.immatriculation.toLowerCase().includes(searchTerm)||vehicule.marque.toLowerCase().includes(searchTerm)||vehicule.modele.toLowerCase().includes(searchTerm)||vehicule.type.toLowerCase().includes(searchTerm)||vehicule.statut.toLowerCase().includes(searchTerm)||(vehicule.coursierAssigne||'').toLowerCase().includes(searchTerm)||vehicule.annee.toString().includes(searchTerm)||vehicule.kilometrage.toString().includes(searchTerm);});}setFilteredVehicules(results);},[quickSearch,vehicules,selectedPole]);const fetchVehicules=async()=>{try{setLoading(true);// Utiliser des données mockées temporairement pour débloquer l'interface\nconst mockVehicules=[{id:'1',immatriculation:'GE-695-RT',marque:'Renault',modele:'Kangoo',type:'Utilitaire',annee:2020,statut:'actif',dernierEntretien:'2023-01-15',coursierAssigne:'Sébastien Lherlier',kilometrage:45000},{id:'2',immatriculation:'GI-456-AD',marque:'Citroën',modele:'Berlingo',type:'Utilitaire',annee:2021,statut:'actif',dernierEntretien:'2023-02-10',coursierAssigne:'Guillaume Sage',kilometrage:32500},{id:'3',immatriculation:'GL-789-BA',marque:'Renault',modele:'Clio',type:'Voiture',annee:2022,statut:'actif',dernierEntretien:'2023-02-20',coursierAssigne:'Michel Roude',kilometrage:15800}];// Essayer de récupérer les données de Firebase, mais utiliser les données mockées en cas d'erreur\ntry{const vehiculesRef=collection(db,'vehicules');const snapshot=await getDocs(vehiculesRef);if(!snapshot.empty){const vehiculesData=snapshot.docs.map(doc=>{const data=doc.data();return{id:doc.id,immatriculation:data.immatriculation||'',marque:data.marque||'',modele:data.modele||'',type:data.type||'Voiture',annee:data.annee||new Date().getFullYear(),statut:data.statut||'actif',dernierEntretien:data.dernierEntretien||'',coursierAssigne:data.coursierAssigne||'',kilometrage:data.kilometrage||0,pole:data.pole||''};});console.log(\"Véhicules récupérés depuis Firestore:\",vehiculesData);setVehicules(vehiculesData);}else{// Si la collection est vide, utiliser les données mockées et les ajouter à Firebase\nsetVehicules(mockVehicules);// Ajouter les données mockées à Firebase\nfor(const vehicule of mockVehicules){const{id,...vehiculeData}=vehicule;await addDoc(collection(db,'vehicules'),vehiculeData);}}}catch(error){console.error('Erreur lors de la récupération des véhicules:',error);// En cas d'erreur, utiliser les données mockées\nsetVehicules(mockVehicules);}setLoading(false);}catch(error){console.error('Erreur lors de la récupération des véhicules:',error);setError('Erreur lors de la récupération des données');setVehicules([]);setLoading(false);}};const handleInputChange=e=>{const{name,value}=e.target;const parsedValue=name==='annee'||name==='kilometrage'?parseInt(value):value;setCurrentVehicule(prev=>({...prev,[name]:parsedValue}));};const handleSubmit=async e=>{e.preventDefault();try{if(isEditing&&currentVehicule.id){// Mettre à jour un véhicule existant dans Firestore\nawait updateDoc(doc(db,'vehicules',currentVehicule.id),{immatriculation:currentVehicule.immatriculation,marque:currentVehicule.marque,modele:currentVehicule.modele,type:currentVehicule.type,annee:currentVehicule.annee,statut:currentVehicule.statut,dernierEntretien:currentVehicule.dernierEntretien,coursierAssigne:currentVehicule.coursierAssigne,kilometrage:currentVehicule.kilometrage});// Mettre à jour l'état local\nsetVehicules(vehicules.map(vehicule=>vehicule.id===currentVehicule.id?{...vehicule,...currentVehicule}:vehicule));}else{// Ajouter un nouveau véhicule dans Firestore\nconst docRef=await addDoc(collection(db,'vehicules'),{immatriculation:currentVehicule.immatriculation,marque:currentVehicule.marque,modele:currentVehicule.modele,type:currentVehicule.type,annee:currentVehicule.annee,statut:currentVehicule.statut,dernierEntretien:currentVehicule.dernierEntretien,coursierAssigne:currentVehicule.coursierAssigne,kilometrage:currentVehicule.kilometrage});// Mettre à jour l'état local avec le nouvel ID\nconst newVehicule={...currentVehicule,id:docRef.id};setVehicules([...vehicules,newVehicule]);}// Fermer le modal et réinitialiser le formulaire\ncloseModal();}catch(error){console.error('Erreur lors de l\\'enregistrement:',error);setError('Erreur lors de l\\'enregistrement');}};const handleEdit=vehicule=>{setCurrentVehicule(vehicule);setIsEditing(true);setIsModalOpen(true);};const handleDeleteSelected=async()=>{if(selectedVehicules.length===0){alert('Veuillez sélectionner au moins un véhicule à supprimer');return;}if(window.confirm(`Êtes-vous sûr de vouloir supprimer ${selectedVehicules.length} véhicule(s) ?`)){try{// Supprimer les véhicules sélectionnés de Firestore\nconst deletePromises=selectedVehicules.map(id=>deleteDoc(doc(db,'vehicules',id)));await Promise.all(deletePromises);// Mettre à jour l'état local\nsetVehicules(vehicules.filter(vehicule=>!selectedVehicules.includes(vehicule.id)));setSelectedVehicules([]);setSelectAll(false);}catch(error){console.error('Erreur lors de la suppression:',error);setError('Erreur lors de la suppression');}}};// Fonction pour gérer la sélection/désélection de tous les véhicules\nconst handleSelectAllChange=()=>{setSelectAll(!selectAll);};const toggleEditMode=()=>{if(editMode){// Si on quitte le mode édition, réinitialiser les sélections et les modifications\nsetSelectedVehicules([]);setEditingVehicules({});setSelectAll(false);setNewVehicules([]);// Rafraîchir les données depuis Firebase\nfetchVehicules();}else{// Si on entre en mode édition, initialiser les sites en édition\nconst editingVehiculesObj={};filteredVehicules.forEach(vehicule=>{editingVehiculesObj[vehicule.id]={...vehicule};});setEditingVehicules(editingVehiculesObj);}// Inverser le mode édition\nsetEditMode(!editMode);// Réinitialiser la recherche rapide et les filtres\nsetQuickSearch('');setSelectedPole('');};const saveAllChanges=async()=>{try{console.log(\"Début de la sauvegarde des modifications...\");console.log(\"Véhicules à mettre à jour:\",Object.keys(editingVehicules).length);console.log(\"Nouveaux véhicules à ajouter:\",newVehicules.length);// Sauvegarder les modifications des véhicules existants\nconst updatePromises=Object.entries(editingVehicules).map(async _ref=>{let[id,vehicule]=_ref;try{console.log(`Mise à jour du véhicule ${id}:`,vehicule);// Vérifier si le document existe avant de tenter une mise à jour\nconst vehiculeRef=doc(db,'vehicules',id);// Créer un objet avec uniquement les champs définis\nconst updateData={};// Vérifier et ajouter chaque champ s'il est défini\nif(vehicule.immatriculation!==undefined)updateData.immatriculation=vehicule.immatriculation;if(vehicule.marque!==undefined)updateData.marque=vehicule.marque;if(vehicule.modele!==undefined)updateData.modele=vehicule.modele;if(vehicule.type!==undefined)updateData.type=vehicule.type;if(vehicule.annee!==undefined)updateData.annee=vehicule.annee;if(vehicule.statut!==undefined)updateData.statut=vehicule.statut;if(vehicule.dernierEntretien!==undefined)updateData.dernierEntretien=vehicule.dernierEntretien;if(vehicule.coursierAssigne!==undefined)updateData.coursierAssigne=vehicule.coursierAssigne;if(vehicule.kilometrage!==undefined)updateData.kilometrage=vehicule.kilometrage;if(vehicule.pole!==undefined)updateData.pole=vehicule.pole;// Exclure l'ID du document des données à mettre à jour\nconst{id:vehiculeId,...vehiculeData}=vehicule;await updateDoc(vehiculeRef,updateData);console.log(`Véhicule ${id} mis à jour avec succès`);return id;}catch(error){console.error(`Erreur lors de la mise à jour du véhicule ${id}:`,error);throw error;}});// Ajouter les nouveaux véhicules\nconst addPromises=newVehicules.map(async(vehicule,index)=>{try{console.log(`Ajout du nouveau véhicule à l'index ${index}:`,vehicule);// S'assurer que tous les champs requis sont présents\nconst vehiculeToAdd={immatriculation:vehicule.immatriculation||'',marque:vehicule.marque||'',modele:vehicule.modele||'',type:vehicule.type||'Voiture',annee:vehicule.annee||new Date().getFullYear(),statut:vehicule.statut||'actif',coursierAssigne:vehicule.coursierAssigne||'',kilometrage:vehicule.kilometrage||0,dernierEntretien:vehicule.dernierEntretien||'',pole:vehicule.pole||''};const docRef=await addDoc(collection(db,'vehicules'),vehiculeToAdd);console.log(`Nouveau véhicule ajouté avec l'ID: ${docRef.id}`);return docRef.id;}catch(error){console.error(`Erreur lors de l'ajout du nouveau véhicule à l'index ${index}:`,error);throw error;}});// Attendre que toutes les opérations soient terminées\nconst results=await Promise.allSettled([...updatePromises,...addPromises]);// Vérifier les résultats\nconst fulfilled=results.filter(result=>result.status==='fulfilled').length;const rejected=results.filter(result=>result.status==='rejected').length;console.log(`Opérations terminées: ${fulfilled} réussies, ${rejected} échouées`);if(rejected>0){console.warn(\"Certaines opérations ont échoué. Voir les erreurs ci-dessus.\");}// Rafraîchir les données\nawait fetchVehicules();// Réinitialiser les états\nsetEditingVehicules({});setNewVehicules([]);if(rejected>0){alert(`Modifications partiellement enregistrées. ${rejected} opérations ont échoué.`);}else{alert('Modifications enregistrées avec succès');}// Désactiver le mode édition après sauvegarde réussie\nsetEditMode(false);setSelectedVehicules([]);setSelectAll(false);}catch(error){console.error('Erreur lors de la sauvegarde:',error);setError('Erreur lors de la sauvegarde');alert('Erreur lors de la sauvegarde des modifications. Veuillez réessayer.');}};const handleCellChange=(id,field,value)=>{console.log(`Mise à jour du véhicule ${id}, champ ${field} avec la valeur:`,value);setEditingVehicules({...editingVehicules,[id]:{...editingVehicules[id],[field]:value}});};const handleSelectVehicule=id=>{if(selectedVehicules.includes(id)){setSelectedVehicules(selectedVehicules.filter(vehiculeId=>vehiculeId!==id));}else{setSelectedVehicules([...selectedVehicules,id]);}};const handleDateChange=(date,id)=>{if(date){setEditingVehicules({...editingVehicules,[id]:{...editingVehicules[id],dernierEntretien:date.toISOString().split('T')[0]}});}};const handleEditInputChange=(e,id)=>{const{name,value}=e.target;// Extraire le nom du champ à partir de l'attribut name ou utiliser un nom par défaut basé sur le type d'entrée\nlet fieldName=name;// Si le nom est vide ou non défini, essayer de l'extraire du nom complet\nif(!fieldName||fieldName.startsWith('vehicule-')){const nameParts=fieldName.split('-');if(nameParts.length>=3){fieldName=nameParts[2];// Prendre la troisième partie (après \"vehicule-id-\")\n}else{// Fallback: utiliser un nom basé sur le type d'entrée\nif(e.target.type==='date'){fieldName='dernierEntretien';}else if(e.target.tagName.toLowerCase()==='select'){// Déterminer le type de select\nif(value==='actif'||value==='maintenance'||value==='inactif'){fieldName='statut';}else if(value==='Voiture'||value==='Utilitaire'||value==='Camionnette'){fieldName='type';}}}}console.log(`Modification du champ ${fieldName} pour le véhicule ${id} avec la valeur ${value}`);// Convertir les valeurs numériques si nécessaire\nconst parsedValue=fieldName==='annee'||fieldName==='kilometrage'?parseInt(value):value;// S'assurer que le véhicule existe dans l'état d'édition\nif(!editingVehicules[id]){// Si le véhicule n'existe pas dans l'état d'édition, le récupérer depuis l'état des véhicules\nconst vehicule=vehicules.find(v=>v.id===id);if(vehicule){setEditingVehicules(prev=>({...prev,[id]:{...vehicule,[fieldName]:parsedValue}}));}}else{// Mettre à jour le véhicule existant\nsetEditingVehicules(prev=>({...prev,[id]:{...prev[id],[fieldName]:parsedValue}}));}};const addNewVehicule=()=>{// Forcer le mode édition si ce n'est pas déjà le cas\nif(!editMode){setEditMode(true);}const newVehicule={id:`temp-${Date.now()}`,// Identifiant temporaire unique\nimmatriculation:'',marque:'',modele:'',type:'Voiture',annee:new Date().getFullYear(),statut:'actif',coursierAssigne:'',kilometrage:0};// Ajouter la nouvelle ligne au début du tableau\nsetNewVehicules(prevNewVehicules=>[newVehicule,...prevNewVehicules]);// Ajouter un délai pour permettre le rendu\nsetTimeout(()=>{const firstInput=document.querySelector('.vehicules-table-container .new-vehicule-row input');if(firstInput){firstInput.focus();}},100);};const handleNewVehiculeChange=(index,field,value)=>{const updatedNewVehicules=[...newVehicules];// S'assurer que le véhicule existe à cet index\nif(!updatedNewVehicules[index]){updatedNewVehicules[index]={id:`temp-${Date.now()}-${index}`,immatriculation:'',marque:'',modele:'',type:'Voiture',annee:new Date().getFullYear(),statut:'actif',coursierAssigne:'',kilometrage:0};}updatedNewVehicules[index]={...updatedNewVehicules[index],[field]:value};setNewVehicules(updatedNewVehicules);};const removeNewVehicule=index=>{setNewVehicules(newVehicules.filter((_,i)=>i!==index));};const openModal=()=>{setCurrentVehicule({immatriculation:'',marque:'',modele:'',type:'Voiture',annee:new Date().getFullYear(),statut:'actif',coursierAssigne:'',kilometrage:0});setIsEditing(false);setIsModalOpen(true);};const closeModal=()=>{setIsModalOpen(false);setCurrentVehicule({immatriculation:'',marque:'',modele:'',type:'Voiture',annee:new Date().getFullYear(),statut:'actif',coursierAssigne:'',kilometrage:0});setIsEditing(false);};const getStatusClass=statut=>{switch(statut){case'actif':return'livré';case'maintenance':return'en-cours';case'inactif':return'en-cours';default:return'';}};// Fonction pour gérer le changement de pôle\nconst handlePoleChange=pole=>{setSelectedPole(pole);};if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"loading-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Chargement des v\\xE9hicules...\"})]});}if(error){return/*#__PURE__*/_jsx(\"div\",{className:\"error\",children:error});}return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"section-header\",children:/*#__PURE__*/_jsx(\"h2\",{className:\"section-title\",children:\"V\\xE9hicules\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"sticky-header-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"header-actions\",children:editMode?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"button\",{className:\"button\",onClick:saveAllChanges,disabled:loading||selectedVehicules.length===0&&newVehicules.length===0,style:{backgroundColor:'#4CAF50',// Vert\ncolor:'white',fontWeight:'bold'},title:\"Enregistrer les modifications\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-save\"}),\" Enr. \",selectedVehicules.length>0||newVehicules.length>0?`(${selectedVehicules.length}${newVehicules.length>0?`+${newVehicules.length}`:''})`:'']}),/*#__PURE__*/_jsxs(\"button\",{className:\"button button-secondary\",onClick:()=>{if(window.confirm(\"Êtes-vous sûr de vouloir annuler toutes les modifications ?\")){setEditingVehicules({});setNewVehicules([]);setSelectedVehicules([]);setSelectAll(false);setEditMode(false);}},style:{marginLeft:'5px'},disabled:loading,title:\"Annuler les modifications\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-times\"}),\" Annuler\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"button\",onClick:addNewVehicule,style:{marginLeft:'5px',backgroundColor:'#FF9800',// Orange\ncolor:'white',fontWeight:'bold'},disabled:loading,title:\"Ajouter un nouveau v\\xE9hicule\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus\"}),\" Ajouter\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"button button-danger\",onClick:handleDeleteSelected,disabled:selectedVehicules.length===0||loading,style:{marginLeft:'5px',backgroundColor:'#f44336',color:'white',fontWeight:'bold'},title:\"Supprimer les v\\xE9hicules s\\xE9lectionn\\xE9s\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-trash-alt\"}),\" Sup. (\",selectedVehicules.length,\")\"]})]}):/*#__PURE__*/_jsxs(\"button\",{className:\"button\",onClick:toggleEditMode,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-edit\"}),\" Modifier\"]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"quick-search-container\",style:{marginTop:'10px'},children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"quick-search-input\",placeholder:\"Recherche rapide...\",value:quickSearch,onChange:e=>setQuickSearch(e.target.value),disabled:loading}),/*#__PURE__*/_jsx(\"div\",{className:\"pole-filter\",children:/*#__PURE__*/_jsx(PoleFilter,{onPoleChange:handlePoleChange,selectedPole:selectedPole,label:\"Filtrer par p\\xF4le\",className:\"pole-filter-component\"})})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"vehicules-table-container\",style:{overflowX:'auto'},children:[/*#__PURE__*/_jsx(\"div\",{className:\"results-info\",children:/*#__PURE__*/_jsxs(\"p\",{children:[filteredVehicules.length,\" r\\xE9sultat(s) trouv\\xE9(s)\",quickSearch?` pour la recherche \"${quickSearch}\"`:'']})}),/*#__PURE__*/_jsxs(\"table\",{className:`data-table ${editMode?'editing':''}`,children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[editMode&&/*#__PURE__*/_jsx(\"th\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:selectAll,onChange:handleSelectAllChange,\"aria-label\":\"S\\xE9lectionner tous les v\\xE9hicules\"})}),/*#__PURE__*/_jsx(\"th\",{children:\"P\\xD4LE\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Immatriculation\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Marque\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Mod\\xE8le\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Type\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Ann\\xE9e\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Statut\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Dernier Entretien\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Coursier Assign\\xE9\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Kilom\\xE9trage\"})]})}),/*#__PURE__*/_jsxs(\"tbody\",{children:[editMode&&newVehicules.map((newVehicule,index)=>/*#__PURE__*/_jsxs(\"tr\",{className:\"new-vehicule-row\",children:[/*#__PURE__*/_jsx(\"td\",{style:{display:'none'}}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(PoleSelector,{value:newVehicule.pole||'',onChange:value=>handleNewVehiculeChange(index,'pole',value),placeholder:\"S\\xE9lectionner un p\\xF4le\",style:{width:'100%'},showSearch:true,allowClear:true,title:\"P\\xF4le du v\\xE9hicule\"})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newVehicule.immatriculation||'',onChange:e=>handleNewVehiculeChange(index,'immatriculation',e.target.value),className:\"inline-edit-input\",placeholder:\"Immatriculation\",\"aria-label\":\"Immatriculation du nouveau v\\xE9hicule\",name:`new-vehicule-${index}-immatriculation`})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newVehicule.marque||'',onChange:e=>handleNewVehiculeChange(index,'marque',e.target.value),className:\"inline-edit-input\",placeholder:\"Marque\",\"aria-label\":\"Marque du nouveau v\\xE9hicule\",name:`new-vehicule-${index}-marque`})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newVehicule.modele||'',onChange:e=>handleNewVehiculeChange(index,'modele',e.target.value),className:\"inline-edit-input\",placeholder:\"Mod\\xE8le\",\"aria-label\":\"Mod\\xE8le du nouveau v\\xE9hicule\",name:`new-vehicule-${index}-modele`})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"select\",{value:newVehicule.type||'Voiture',onChange:e=>handleNewVehiculeChange(index,'type',e.target.value),className:\"inline-edit-select\",\"aria-label\":\"Type du nouveau v\\xE9hicule\",name:`new-vehicule-${index}-type`,children:[/*#__PURE__*/_jsx(\"option\",{value:\"Voiture\",children:\"Voiture\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Utilitaire\",children:\"Utilitaire\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Camionnette\",children:\"Camionnette\"})]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newVehicule.annee||new Date().getFullYear(),onChange:e=>handleNewVehiculeChange(index,'annee',e.target.value),className:\"inline-edit-input\",placeholder:\"Ann\\xE9e\",\"aria-label\":\"Ann\\xE9e du nouveau v\\xE9hicule\",name:`new-vehicule-${index}-annee`})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"select\",{value:newVehicule.statut||'actif',onChange:e=>handleNewVehiculeChange(index,'statut',e.target.value),className:\"inline-edit-select\",\"aria-label\":\"Statut du nouveau v\\xE9hicule\",name:`new-vehicule-${index}-statut`,children:[/*#__PURE__*/_jsx(\"option\",{value:\"actif\",children:\"Actif\"}),/*#__PURE__*/_jsx(\"option\",{value:\"maintenance\",children:\"Maintenance\"}),/*#__PURE__*/_jsx(\"option\",{value:\"inactif\",children:\"Inactif\"})]})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:newVehicule.dernierEntretien||'',onChange:e=>handleNewVehiculeChange(index,'dernierEntretien',e.target.value),className:\"inline-edit-input\",\"aria-label\":\"Date du dernier entretien du nouveau v\\xE9hicule\",name:`new-vehicule-${index}-dernierEntretien`})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newVehicule.coursierAssigne||'',onChange:e=>handleNewVehiculeChange(index,'coursierAssigne',e.target.value),className:\"inline-edit-input\",placeholder:\"Coursier\",\"aria-label\":\"Coursier assign\\xE9 au nouveau v\\xE9hicule\",name:`new-vehicule-${index}-coursierAssigne`})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newVehicule.kilometrage||0,onChange:e=>handleNewVehiculeChange(index,'kilometrage',e.target.value),className:\"inline-edit-input\",placeholder:\"Kilom\\xE9trage\",\"aria-label\":\"Kilom\\xE9trage du nouveau v\\xE9hicule\",name:`new-vehicule-${index}-kilometrage`})})]},newVehicule.id)),filteredVehicules.map(vehicule=>{var _editingVehicules$veh,_editingVehicules$veh2,_editingVehicules$veh3,_editingVehicules$veh4,_editingVehicules$veh5,_editingVehicules$veh6,_editingVehicules$veh7,_editingVehicules$veh8,_editingVehicules$veh9,_editingVehicules$veh10;return/*#__PURE__*/_jsxs(\"tr\",{className:selectedVehicules.includes(vehicule.id)?'selected-row':'',children:[editMode&&/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"checkbox\",checked:selectedVehicules.includes(vehicule.id),onChange:()=>handleSelectVehicule(vehicule.id),\"aria-label\":`Sélectionner le véhicule ${vehicule.immatriculation}`})}),/*#__PURE__*/_jsx(\"td\",{children:editMode?/*#__PURE__*/_jsx(PoleSelector,{value:((_editingVehicules$veh=editingVehicules[vehicule.id])===null||_editingVehicules$veh===void 0?void 0:_editingVehicules$veh.pole)||vehicule.pole||'',onChange:value=>handleCellChange(vehicule.id,'pole',value),placeholder:\"S\\xE9lectionner un p\\xF4le\",style:{width:'100%'},showSearch:true,allowClear:true,title:\"P\\xF4le du v\\xE9hicule\"}):getPoleNameById(vehicule.pole)}),/*#__PURE__*/_jsx(\"td\",{children:editMode?/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:((_editingVehicules$veh2=editingVehicules[vehicule.id])===null||_editingVehicules$veh2===void 0?void 0:_editingVehicules$veh2.immatriculation)||vehicule.immatriculation,onChange:e=>handleCellChange(vehicule.id,'immatriculation',e.target.value),className:\"inline-edit-input\",placeholder:\"Immatriculation\"}):vehicule.immatriculation||'-'}),/*#__PURE__*/_jsx(\"td\",{children:editMode?/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:((_editingVehicules$veh3=editingVehicules[vehicule.id])===null||_editingVehicules$veh3===void 0?void 0:_editingVehicules$veh3.marque)||vehicule.marque,onChange:e=>handleCellChange(vehicule.id,'marque',e.target.value),className:\"inline-edit-input\",placeholder:\"Marque\"}):vehicule.marque||'-'}),/*#__PURE__*/_jsx(\"td\",{children:editMode?/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:((_editingVehicules$veh4=editingVehicules[vehicule.id])===null||_editingVehicules$veh4===void 0?void 0:_editingVehicules$veh4.modele)||vehicule.modele,onChange:e=>handleCellChange(vehicule.id,'modele',e.target.value),className:\"inline-edit-input\",placeholder:\"Mod\\xE8le\"}):vehicule.modele||'-'}),/*#__PURE__*/_jsx(\"td\",{children:editMode?/*#__PURE__*/_jsxs(\"select\",{value:((_editingVehicules$veh5=editingVehicules[vehicule.id])===null||_editingVehicules$veh5===void 0?void 0:_editingVehicules$veh5.type)||vehicule.type,onChange:e=>handleCellChange(vehicule.id,'type',e.target.value),className:\"inline-edit-select\",\"aria-label\":`Modifier le type du véhicule ${vehicule.immatriculation}`,children:[/*#__PURE__*/_jsx(\"option\",{value:\"Voiture\",children:\"Voiture\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Utilitaire\",children:\"Utilitaire\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Camionnette\",children:\"Camionnette\"})]}):vehicule.type||'-'}),/*#__PURE__*/_jsx(\"td\",{children:editMode?/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:((_editingVehicules$veh6=editingVehicules[vehicule.id])===null||_editingVehicules$veh6===void 0?void 0:_editingVehicules$veh6.annee)||vehicule.annee,onChange:e=>handleEditInputChange(e,vehicule.id),className:\"inline-edit-input\",\"aria-label\":`Modifier l'année du véhicule ${vehicule.immatriculation}`,name:`vehicule-${vehicule.id}-annee`}):vehicule.annee?vehicule.annee.toString():'-'}),/*#__PURE__*/_jsx(\"td\",{children:editMode?/*#__PURE__*/_jsxs(\"select\",{value:((_editingVehicules$veh7=editingVehicules[vehicule.id])===null||_editingVehicules$veh7===void 0?void 0:_editingVehicules$veh7.statut)||vehicule.statut,onChange:e=>handleEditInputChange(e,vehicule.id),className:\"inline-edit-select\",\"aria-label\":`Modifier le statut du véhicule ${vehicule.immatriculation}`,name:`vehicule-${vehicule.id}-statut`,children:[/*#__PURE__*/_jsx(\"option\",{value:\"actif\",children:\"Actif\"}),/*#__PURE__*/_jsx(\"option\",{value:\"maintenance\",children:\"Maintenance\"}),/*#__PURE__*/_jsx(\"option\",{value:\"inactif\",children:\"Inactif\"})]}):vehicule.statut==='actif'?'Actif':vehicule.statut==='maintenance'?'Maintenance':'Inactif'}),/*#__PURE__*/_jsx(\"td\",{children:editMode?/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:((_editingVehicules$veh8=editingVehicules[vehicule.id])===null||_editingVehicules$veh8===void 0?void 0:_editingVehicules$veh8.dernierEntretien)||vehicule.dernierEntretien||'',onChange:e=>handleEditInputChange(e,vehicule.id),className:\"inline-edit-input\",\"aria-label\":`Modifier la date du dernier entretien du véhicule ${vehicule.immatriculation}`,name:`vehicule-${vehicule.id}-dernierEntretien`}):vehicule.dernierEntretien||'-'}),/*#__PURE__*/_jsx(\"td\",{children:editMode?/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:((_editingVehicules$veh9=editingVehicules[vehicule.id])===null||_editingVehicules$veh9===void 0?void 0:_editingVehicules$veh9.coursierAssigne)||vehicule.coursierAssigne||'',onChange:e=>handleEditInputChange(e,vehicule.id),className:\"inline-edit-input\",\"aria-label\":`Modifier le coursier assigné au véhicule ${vehicule.immatriculation}`,name:`vehicule-${vehicule.id}-coursierAssigne`}):vehicule.coursierAssigne||'-'}),/*#__PURE__*/_jsx(\"td\",{children:editMode?/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:((_editingVehicules$veh10=editingVehicules[vehicule.id])===null||_editingVehicules$veh10===void 0?void 0:_editingVehicules$veh10.kilometrage)||vehicule.kilometrage,onChange:e=>handleEditInputChange(e,vehicule.id),className:\"inline-edit-input\",\"aria-label\":`Modifier le kilométrage du véhicule ${vehicule.immatriculation}`,name:`vehicule-${vehicule.id}-kilometrage`}):vehicule.kilometrage?vehicule.kilometrage.toString():'-'})]},vehicule.id);})]})]})]}),isModalOpen&&/*#__PURE__*/_jsx(\"div\",{className:\"modal-overlay\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"modal-title\",children:isEditing?'Modifier le véhicule':'Ajouter un véhicule'}),/*#__PURE__*/_jsx(\"button\",{className:\"modal-close\",onClick:closeModal,children:\"\\xD7\"})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"immatriculation\",className:\"form-label\",children:\"Immatriculation\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"immatriculation\",name:\"immatriculation\",className:\"form-input\",value:currentVehicule.immatriculation,onChange:handleInputChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"marque\",className:\"form-label\",children:\"Marque\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"marque\",name:\"marque\",className:\"form-input\",value:currentVehicule.marque,onChange:handleInputChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"modele\",className:\"form-label\",children:\"Mod\\xE8le\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"modele\",name:\"modele\",className:\"form-input\",value:currentVehicule.modele,onChange:handleInputChange,required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"type\",className:\"form-label\",children:\"Type\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"type\",name:\"type\",className:\"form-select\",value:currentVehicule.type,onChange:handleInputChange,required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"Voiture\",children:\"Voiture\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Utilitaire\",children:\"Utilitaire\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Moto\",children:\"Moto\"}),/*#__PURE__*/_jsx(\"option\",{value:\"V\\xE9lo\",children:\"V\\xE9lo\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"annee\",className:\"form-label\",children:\"Ann\\xE9e\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"annee\",name:\"annee\",className:\"form-input\",value:currentVehicule.annee,onChange:handleInputChange,min:\"2000\",max:new Date().getFullYear(),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"kilometrage\",className:\"form-label\",children:\"Kilom\\xE9trage\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",id:\"kilometrage\",name:\"kilometrage\",className:\"form-input\",value:currentVehicule.kilometrage,onChange:handleInputChange,min:\"0\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"dernierEntretien\",className:\"form-label\",children:\"Dernier Entretien\"}),/*#__PURE__*/_jsx(\"div\",{className:\"custom-datepicker-wrapper\",children:/*#__PURE__*/_jsx(DatePicker,{selected:currentVehicule.dernierEntretien&&currentVehicule.dernierEntretien!==''?new Date(currentVehicule.dernierEntretien):null,onChange:date=>{if(date){const formattedDate=date.toISOString().split('T')[0];setCurrentVehicule(prev=>({...prev,dernierEntretien:formattedDate}));}else{setCurrentVehicule(prev=>({...prev,dernierEntretien:undefined}));}},locale:\"fr\",dateFormat:\"dd/MM/yyyy\",placeholderText:\"JJ/MM/AAAA\",className:\"form-input custom-datepicker-input\",popperPlacement:\"bottom-start\",showMonthDropdown:true,showYearDropdown:true,dropdownMode:\"select\",isClearable:true})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"coursierAssigne\",className:\"form-label\",children:\"Coursier Assign\\xE9\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"coursierAssigne\",name:\"coursierAssigne\",className:\"form-input\",value:currentVehicule.coursierAssigne||'',onChange:handleInputChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"statut\",className:\"form-label\",children:\"Statut\"}),/*#__PURE__*/_jsxs(\"select\",{id:\"statut\",name:\"statut\",className:\"form-select\",value:currentVehicule.statut,onChange:handleInputChange,required:true,children:[/*#__PURE__*/_jsx(\"option\",{value:\"actif\",children:\"Actif\"}),/*#__PURE__*/_jsx(\"option\",{value:\"maintenance\",children:\"Maintenance\"}),/*#__PURE__*/_jsx(\"option\",{value:\"inactif\",children:\"Inactif\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"button button-secondary\",onClick:closeModal,children:\"Annuler\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"button\",children:isEditing?'Mettre à jour':'Ajouter'})]})]})]})})]});};export default Vehicules;","map":{"version":3,"names":["React","useState","useEffect","db","collection","getDocs","addDoc","updateDoc","deleteDoc","doc","DatePicker","registerLocale","fr","usePoles","PoleSelector","PoleFilter","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Vehicules","vehicules","setVehicules","loading","setLoading","error","setError","isModalOpen","setIsModalOpen","isEditing","setIsEditing","currentVehicule","setCurrentVehicule","immatriculation","marque","modele","type","annee","Date","getFullYear","statut","coursierAssigne","kilometrage","editMode","setEditMode","selectedVehicules","setSelectedVehicules","editingVehicules","setEditingVehicules","selectAll","setSelectAll","newVehicules","setNewVehicules","quickSearch","setQuickSearch","filteredVehicules","setFilteredVehicules","selectedPole","setSelectedPole","poles","getPoleNameById","poleId","pole","find","p","id","nom","fetchVehicules","map","vehicule","length","results","filter","trim","searchTerm","toLowerCase","includes","toString","mockVehicules","dernierEntretien","vehiculesRef","snapshot","empty","vehiculesData","docs","data","console","log","vehiculeData","handleInputChange","e","name","value","target","parsedValue","parseInt","prev","handleSubmit","preventDefault","docRef","newVehicule","closeModal","handleEdit","handleDeleteSelected","alert","window","confirm","deletePromises","Promise","all","handleSelectAllChange","toggleEditMode","editingVehiculesObj","forEach","saveAllChanges","Object","keys","updatePromises","entries","_ref","vehiculeRef","updateData","undefined","vehiculeId","addPromises","index","vehiculeToAdd","allSettled","fulfilled","result","status","rejected","warn","handleCellChange","field","handleSelectVehicule","handleDateChange","date","toISOString","split","handleEditInputChange","fieldName","startsWith","nameParts","tagName","v","addNewVehicule","now","prevNewVehicules","setTimeout","firstInput","document","querySelector","focus","handleNewVehiculeChange","updatedNewVehicules","removeNewVehicule","_","i","openModal","getStatusClass","handlePoleChange","className","children","onClick","disabled","style","backgroundColor","color","fontWeight","title","marginLeft","marginTop","placeholder","onChange","onPoleChange","label","overflowX","checked","display","width","showSearch","allowClear","_editingVehicules$veh","_editingVehicules$veh2","_editingVehicules$veh3","_editingVehicules$veh4","_editingVehicules$veh5","_editingVehicules$veh6","_editingVehicules$veh7","_editingVehicules$veh8","_editingVehicules$veh9","_editingVehicules$veh10","onSubmit","htmlFor","required","min","max","selected","formattedDate","locale","dateFormat","placeholderText","popperPlacement","showMonthDropdown","showYearDropdown","dropdownMode","isClearable"],"sources":["C:/Users/LS_110/Documents/GitHub/inovie-SCAN-web-main/src/components/Vehicules.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { db } from '../config/firebase';\r\nimport { collection, getDocs, addDoc, updateDoc, deleteDoc, doc } from 'firebase/firestore';\r\nimport DatePicker from 'react-datepicker';\r\nimport { registerLocale } from 'react-datepicker';\r\nimport { fr } from 'date-fns/locale';\r\nimport 'react-datepicker/dist/react-datepicker.css';\r\nimport './EditMode.css';\r\nimport './Vehicules.css';\r\nimport { usePoles } from '../services/PoleService';\r\nimport PoleSelector from './PoleSelector';\r\nimport PoleFilter from './PoleFilter';\r\n\r\n// Enregistrer la locale française\r\nregisterLocale('fr', fr);\r\n\r\ninterface Vehicule {\r\n  id: string;\r\n  immatriculation: string;\r\n  marque: string;\r\n  modele: string;\r\n  type: string;\r\n  annee: number;\r\n  statut: 'actif' | 'maintenance' | 'inactif';\r\n  dernierEntretien?: string;\r\n  coursierAssigne?: string;\r\n  kilometrage: number;\r\n  pole?: string;\r\n}\r\n\r\nconst Vehicules: React.FC = () => {\r\n  const [vehicules, setVehicules] = useState<Vehicule[]>([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState<string | null>(null);\r\n  \r\n  // État pour le modal\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [isEditing, setIsEditing] = useState(false);\r\n  const [currentVehicule, setCurrentVehicule] = useState<Partial<Vehicule>>({\r\n    immatriculation: '',\r\n    marque: '',\r\n    modele: '',\r\n    type: 'Voiture',\r\n    annee: new Date().getFullYear(),\r\n    statut: 'actif',\r\n    coursierAssigne: '',\r\n    kilometrage: 0\r\n  });\r\n\r\n  // État pour le mode édition et la sélection multiple\r\n  const [editMode, setEditMode] = useState(false);\r\n  const [selectedVehicules, setSelectedVehicules] = useState<string[]>([]);\r\n  const [editingVehicules, setEditingVehicules] = useState<{[key: string]: Vehicule}>({});\r\n  const [selectAll, setSelectAll] = useState(false);\r\n  \r\n  // Ajouter un nouvel état pour les nouveaux véhicules temporaires\r\n  const [newVehicules, setNewVehicules] = useState<Partial<Vehicule>[]>([]);\r\n  \r\n  // État pour la recherche rapide\r\n  const [quickSearch, setQuickSearch] = useState<string>('');\r\n  const [filteredVehicules, setFilteredVehicules] = useState<Vehicule[]>([]);\r\n\r\n  // Ajout du filtre par pôle\r\n  const [selectedPole, setSelectedPole] = useState<string>('');\r\n\r\n  // Utilisation du hook usePoles\r\n  const { poles } = usePoles();\r\n  \r\n  // Fonction pour obtenir le nom du pôle\r\n  const getPoleNameById = (poleId: string | undefined): string => {\r\n    if (!poleId) return '-';\r\n    const pole = poles.find(p => p.id === poleId);\r\n    return pole ? pole.nom : poleId;\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchVehicules();\r\n  }, []);\r\n\r\n  // Effet pour gérer la sélection/désélection de tous les véhicules\r\n  useEffect(() => {\r\n    if (selectAll) {\r\n      setSelectedVehicules(vehicules.map(vehicule => vehicule.id));\r\n    } else if (selectedVehicules.length === vehicules.length) {\r\n      // Si tous les véhicules sont sélectionnés mais que selectAll est false, cela signifie que l'utilisateur a désélectionné\r\n      setSelectedVehicules([]);\r\n    }\r\n  }, [selectAll]);\r\n\r\n  // Initialiser les véhicules filtrés au chargement\r\n  useEffect(() => {\r\n    setFilteredVehicules(vehicules);\r\n  }, [vehicules]);\r\n\r\n  // Effet pour filtrer les véhicules en fonction de la recherche rapide et du pôle sélectionné\r\n  useEffect(() => {\r\n    let results = vehicules;\r\n\r\n    // Filtrer par pôle si un pôle est sélectionné\r\n    if (selectedPole) {\r\n      results = results.filter(vehicule => vehicule.pole === selectedPole);\r\n    }\r\n\r\n    // Ensuite filtrer par recherche rapide\r\n    if (quickSearch.trim()) {\r\n      const searchTerm = quickSearch.toLowerCase().trim();\r\n      results = results.filter(vehicule => {\r\n        // Rechercher dans tous les champs textuels du véhicule\r\n        return (\r\n          vehicule.immatriculation.toLowerCase().includes(searchTerm) ||\r\n          vehicule.marque.toLowerCase().includes(searchTerm) ||\r\n          vehicule.modele.toLowerCase().includes(searchTerm) ||\r\n          vehicule.type.toLowerCase().includes(searchTerm) ||\r\n          vehicule.statut.toLowerCase().includes(searchTerm) ||\r\n          (vehicule.coursierAssigne || '').toLowerCase().includes(searchTerm) ||\r\n          vehicule.annee.toString().includes(searchTerm) ||\r\n          vehicule.kilometrage.toString().includes(searchTerm)\r\n        );\r\n      });\r\n    }\r\n\r\n    setFilteredVehicules(results);\r\n  }, [quickSearch, vehicules, selectedPole]);\r\n\r\n  const fetchVehicules = async () => {\r\n    try {\r\n      setLoading(true);\r\n      \r\n      // Utiliser des données mockées temporairement pour débloquer l'interface\r\n      const mockVehicules = [\r\n        {\r\n          id: '1',\r\n          immatriculation: 'GE-695-RT',\r\n          marque: 'Renault',\r\n          modele: 'Kangoo',\r\n          type: 'Utilitaire',\r\n          annee: 2020,\r\n          statut: 'actif' as const,\r\n          dernierEntretien: '2023-01-15',\r\n          coursierAssigne: 'Sébastien Lherlier',\r\n          kilometrage: 45000\r\n        },\r\n        {\r\n          id: '2',\r\n          immatriculation: 'GI-456-AD',\r\n          marque: 'Citroën',\r\n          modele: 'Berlingo',\r\n          type: 'Utilitaire',\r\n          annee: 2021,\r\n          statut: 'actif' as const,\r\n          dernierEntretien: '2023-02-10',\r\n          coursierAssigne: 'Guillaume Sage',\r\n          kilometrage: 32500\r\n        },\r\n        {\r\n          id: '3',\r\n          immatriculation: 'GL-789-BA',\r\n          marque: 'Renault',\r\n          modele: 'Clio',\r\n          type: 'Voiture',\r\n          annee: 2022,\r\n          statut: 'actif' as const,\r\n          dernierEntretien: '2023-02-20',\r\n          coursierAssigne: 'Michel Roude',\r\n          kilometrage: 15800\r\n        }\r\n      ];\r\n      \r\n      // Essayer de récupérer les données de Firebase, mais utiliser les données mockées en cas d'erreur\r\n      try {\r\n        const vehiculesRef = collection(db, 'vehicules');\r\n        const snapshot = await getDocs(vehiculesRef);\r\n        \r\n        if (!snapshot.empty) {\r\n          const vehiculesData = snapshot.docs.map(doc => {\r\n            const data = doc.data();\r\n            return {\r\n              id: doc.id,\r\n              immatriculation: data.immatriculation || '',\r\n              marque: data.marque || '',\r\n              modele: data.modele || '',\r\n              type: data.type || 'Voiture',\r\n              annee: data.annee || new Date().getFullYear(),\r\n              statut: data.statut || 'actif',\r\n              dernierEntretien: data.dernierEntretien || '',\r\n              coursierAssigne: data.coursierAssigne || '',\r\n              kilometrage: data.kilometrage || 0,\r\n              pole: data.pole || ''\r\n            } as Vehicule;\r\n          });\r\n          \r\n          console.log(\"Véhicules récupérés depuis Firestore:\", vehiculesData);\r\n          setVehicules(vehiculesData);\r\n        } else {\r\n          // Si la collection est vide, utiliser les données mockées et les ajouter à Firebase\r\n          setVehicules(mockVehicules);\r\n          \r\n          // Ajouter les données mockées à Firebase\r\n          for (const vehicule of mockVehicules) {\r\n            const { id, ...vehiculeData } = vehicule;\r\n            await addDoc(collection(db, 'vehicules'), vehiculeData);\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error('Erreur lors de la récupération des véhicules:', error);\r\n        // En cas d'erreur, utiliser les données mockées\r\n        setVehicules(mockVehicules);\r\n      }\r\n      \r\n      setLoading(false);\r\n    } catch (error) {\r\n      console.error('Erreur lors de la récupération des véhicules:', error);\r\n      setError('Erreur lors de la récupération des données');\r\n      setVehicules([]);\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {\r\n    const { name, value } = e.target;\r\n    const parsedValue = name === 'annee' || name === 'kilometrage' ? parseInt(value) : value;\r\n    setCurrentVehicule(prev => ({ ...prev, [name]: parsedValue }));\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    \r\n    try {\r\n      if (isEditing && currentVehicule.id) {\r\n        // Mettre à jour un véhicule existant dans Firestore\r\n        await updateDoc(doc(db, 'vehicules', currentVehicule.id), {\r\n          immatriculation: currentVehicule.immatriculation,\r\n          marque: currentVehicule.marque,\r\n          modele: currentVehicule.modele,\r\n          type: currentVehicule.type,\r\n          annee: currentVehicule.annee,\r\n          statut: currentVehicule.statut,\r\n          dernierEntretien: currentVehicule.dernierEntretien,\r\n          coursierAssigne: currentVehicule.coursierAssigne,\r\n          kilometrage: currentVehicule.kilometrage\r\n        });\r\n        \r\n        // Mettre à jour l'état local\r\n        setVehicules(vehicules.map(vehicule => \r\n          vehicule.id === currentVehicule.id ? { ...vehicule, ...currentVehicule as Vehicule } : vehicule\r\n        ));\r\n      } else {\r\n        // Ajouter un nouveau véhicule dans Firestore\r\n        const docRef = await addDoc(collection(db, 'vehicules'), {\r\n          immatriculation: currentVehicule.immatriculation,\r\n          marque: currentVehicule.marque,\r\n          modele: currentVehicule.modele,\r\n          type: currentVehicule.type,\r\n          annee: currentVehicule.annee,\r\n          statut: currentVehicule.statut,\r\n          dernierEntretien: currentVehicule.dernierEntretien,\r\n          coursierAssigne: currentVehicule.coursierAssigne,\r\n          kilometrage: currentVehicule.kilometrage\r\n        });\r\n        \r\n        // Mettre à jour l'état local avec le nouvel ID\r\n        const newVehicule = {\r\n          ...currentVehicule as Vehicule,\r\n          id: docRef.id\r\n        };\r\n        \r\n        setVehicules([...vehicules, newVehicule]);\r\n      }\r\n      \r\n      // Fermer le modal et réinitialiser le formulaire\r\n      closeModal();\r\n    } catch (error) {\r\n      console.error('Erreur lors de l\\'enregistrement:', error);\r\n      setError('Erreur lors de l\\'enregistrement');\r\n    }\r\n  };\r\n\r\n  const handleEdit = (vehicule: Vehicule) => {\r\n    setCurrentVehicule(vehicule);\r\n    setIsEditing(true);\r\n    setIsModalOpen(true);\r\n  };\r\n\r\n  const handleDeleteSelected = async () => {\r\n    if (selectedVehicules.length === 0) {\r\n      alert('Veuillez sélectionner au moins un véhicule à supprimer');\r\n      return;\r\n    }\r\n\r\n    if (window.confirm(`Êtes-vous sûr de vouloir supprimer ${selectedVehicules.length} véhicule(s) ?`)) {\r\n      try {\r\n        // Supprimer les véhicules sélectionnés de Firestore\r\n        const deletePromises = selectedVehicules.map(id => deleteDoc(doc(db, 'vehicules', id)));\r\n        await Promise.all(deletePromises);\r\n        \r\n        // Mettre à jour l'état local\r\n        setVehicules(vehicules.filter(vehicule => !selectedVehicules.includes(vehicule.id)));\r\n        setSelectedVehicules([]);\r\n        setSelectAll(false);\r\n      } catch (error) {\r\n        console.error('Erreur lors de la suppression:', error);\r\n        setError('Erreur lors de la suppression');\r\n      }\r\n    }\r\n  };\r\n\r\n  // Fonction pour gérer la sélection/désélection de tous les véhicules\r\n  const handleSelectAllChange = () => {\r\n    setSelectAll(!selectAll);\r\n  };\r\n\r\n  const toggleEditMode = () => {\r\n    if (editMode) {\r\n      // Si on quitte le mode édition, réinitialiser les sélections et les modifications\r\n      setSelectedVehicules([]);\r\n      setEditingVehicules({});\r\n      setSelectAll(false);\r\n      setNewVehicules([]);\r\n      \r\n      // Rafraîchir les données depuis Firebase\r\n      fetchVehicules();\r\n    } else {\r\n      // Si on entre en mode édition, initialiser les sites en édition\r\n      const editingVehiculesObj: {[key: string]: Vehicule} = {};\r\n      filteredVehicules.forEach(vehicule => {\r\n        editingVehiculesObj[vehicule.id] = { ...vehicule };\r\n      });\r\n      setEditingVehicules(editingVehiculesObj);\r\n    }\r\n    \r\n    // Inverser le mode édition\r\n    setEditMode(!editMode);\r\n    \r\n    // Réinitialiser la recherche rapide et les filtres\r\n    setQuickSearch('');\r\n    setSelectedPole('');\r\n  };\r\n\r\n  const saveAllChanges = async () => {\r\n    try {\r\n      console.log(\"Début de la sauvegarde des modifications...\");\r\n      console.log(\"Véhicules à mettre à jour:\", Object.keys(editingVehicules).length);\r\n      console.log(\"Nouveaux véhicules à ajouter:\", newVehicules.length);\r\n      \r\n      // Sauvegarder les modifications des véhicules existants\r\n      const updatePromises = Object.entries(editingVehicules).map(async ([id, vehicule]) => {\r\n        try {\r\n          console.log(`Mise à jour du véhicule ${id}:`, vehicule);\r\n          \r\n          // Vérifier si le document existe avant de tenter une mise à jour\r\n          const vehiculeRef = doc(db, 'vehicules', id);\r\n          \r\n          // Créer un objet avec uniquement les champs définis\r\n          const updateData: Partial<Vehicule> = {};\r\n          \r\n          // Vérifier et ajouter chaque champ s'il est défini\r\n          if (vehicule.immatriculation !== undefined) updateData.immatriculation = vehicule.immatriculation;\r\n          if (vehicule.marque !== undefined) updateData.marque = vehicule.marque;\r\n          if (vehicule.modele !== undefined) updateData.modele = vehicule.modele;\r\n          if (vehicule.type !== undefined) updateData.type = vehicule.type;\r\n          if (vehicule.annee !== undefined) updateData.annee = vehicule.annee;\r\n          if (vehicule.statut !== undefined) updateData.statut = vehicule.statut;\r\n          if (vehicule.dernierEntretien !== undefined) updateData.dernierEntretien = vehicule.dernierEntretien;\r\n          if (vehicule.coursierAssigne !== undefined) updateData.coursierAssigne = vehicule.coursierAssigne;\r\n          if (vehicule.kilometrage !== undefined) updateData.kilometrage = vehicule.kilometrage;\r\n          if (vehicule.pole !== undefined) updateData.pole = vehicule.pole;\r\n          \r\n          // Exclure l'ID du document des données à mettre à jour\r\n          const { id: vehiculeId, ...vehiculeData } = vehicule;\r\n          \r\n          await updateDoc(vehiculeRef, updateData);\r\n          console.log(`Véhicule ${id} mis à jour avec succès`);\r\n          return id;\r\n        } catch (error) {\r\n          console.error(`Erreur lors de la mise à jour du véhicule ${id}:`, error);\r\n          throw error;\r\n        }\r\n      });\r\n      \r\n      // Ajouter les nouveaux véhicules\r\n      const addPromises = newVehicules.map(async (vehicule, index) => {\r\n        try {\r\n          console.log(`Ajout du nouveau véhicule à l'index ${index}:`, vehicule);\r\n          \r\n          // S'assurer que tous les champs requis sont présents\r\n          const vehiculeToAdd: Partial<Vehicule> = {\r\n            immatriculation: vehicule.immatriculation || '',\r\n            marque: vehicule.marque || '',\r\n            modele: vehicule.modele || '',\r\n            type: vehicule.type || 'Voiture',\r\n            annee: vehicule.annee || new Date().getFullYear(),\r\n            statut: vehicule.statut || 'actif',\r\n            coursierAssigne: vehicule.coursierAssigne || '',\r\n            kilometrage: vehicule.kilometrage || 0,\r\n            dernierEntretien: vehicule.dernierEntretien || '',\r\n            pole: vehicule.pole || ''\r\n          };\r\n          \r\n          const docRef = await addDoc(collection(db, 'vehicules'), vehiculeToAdd);\r\n          console.log(`Nouveau véhicule ajouté avec l'ID: ${docRef.id}`);\r\n          return docRef.id;\r\n        } catch (error) {\r\n          console.error(`Erreur lors de l'ajout du nouveau véhicule à l'index ${index}:`, error);\r\n          throw error;\r\n        }\r\n      });\r\n      \r\n      // Attendre que toutes les opérations soient terminées\r\n      const results = await Promise.allSettled([...updatePromises, ...addPromises]);\r\n      \r\n      // Vérifier les résultats\r\n      const fulfilled = results.filter(result => result.status === 'fulfilled').length;\r\n      const rejected = results.filter(result => result.status === 'rejected').length;\r\n      \r\n      console.log(`Opérations terminées: ${fulfilled} réussies, ${rejected} échouées`);\r\n      \r\n      if (rejected > 0) {\r\n        console.warn(\"Certaines opérations ont échoué. Voir les erreurs ci-dessus.\");\r\n      }\r\n      \r\n      // Rafraîchir les données\r\n      await fetchVehicules();\r\n      \r\n      // Réinitialiser les états\r\n      setEditingVehicules({});\r\n      setNewVehicules([]);\r\n      \r\n      if (rejected > 0) {\r\n        alert(`Modifications partiellement enregistrées. ${rejected} opérations ont échoué.`);\r\n      } else {\r\n        alert('Modifications enregistrées avec succès');\r\n      }\r\n      \r\n      // Désactiver le mode édition après sauvegarde réussie\r\n      setEditMode(false);\r\n      setSelectedVehicules([]);\r\n      setSelectAll(false);\r\n    } catch (error) {\r\n      console.error('Erreur lors de la sauvegarde:', error);\r\n      setError('Erreur lors de la sauvegarde');\r\n      alert('Erreur lors de la sauvegarde des modifications. Veuillez réessayer.');\r\n    }\r\n  };\r\n\r\n  const handleCellChange = (id: string, field: keyof Vehicule, value: any) => {\r\n    console.log(`Mise à jour du véhicule ${id}, champ ${field} avec la valeur:`, value);\r\n    setEditingVehicules({\r\n      ...editingVehicules,\r\n      [id]: {\r\n        ...editingVehicules[id],\r\n        [field]: value\r\n      }\r\n    });\r\n  };\r\n\r\n  const handleSelectVehicule = (id: string) => {\r\n    if (selectedVehicules.includes(id)) {\r\n      setSelectedVehicules(selectedVehicules.filter(vehiculeId => vehiculeId !== id));\r\n    } else {\r\n      setSelectedVehicules([...selectedVehicules, id]);\r\n    }\r\n  };\r\n\r\n  const handleDateChange = (date: Date | null, id: string) => {\r\n    if (date) {\r\n      setEditingVehicules({\r\n        ...editingVehicules,\r\n        [id]: {\r\n          ...editingVehicules[id],\r\n          dernierEntretien: date.toISOString().split('T')[0]\r\n        }\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleEditInputChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>, id: string) => {\r\n    const { name, value } = e.target;\r\n    \r\n    // Extraire le nom du champ à partir de l'attribut name ou utiliser un nom par défaut basé sur le type d'entrée\r\n    let fieldName = name;\r\n    \r\n    // Si le nom est vide ou non défini, essayer de l'extraire du nom complet\r\n    if (!fieldName || fieldName.startsWith('vehicule-')) {\r\n      const nameParts = fieldName.split('-');\r\n      if (nameParts.length >= 3) {\r\n        fieldName = nameParts[2]; // Prendre la troisième partie (après \"vehicule-id-\")\r\n      } else {\r\n        // Fallback: utiliser un nom basé sur le type d'entrée\r\n        if (e.target.type === 'date') {\r\n          fieldName = 'dernierEntretien';\r\n        } else if (e.target.tagName.toLowerCase() === 'select') {\r\n          // Déterminer le type de select\r\n          if (value === 'actif' || value === 'maintenance' || value === 'inactif') {\r\n            fieldName = 'statut';\r\n          } else if (value === 'Voiture' || value === 'Utilitaire' || value === 'Camionnette') {\r\n            fieldName = 'type';\r\n          }\r\n        }\r\n      }\r\n    }\r\n    \r\n    console.log(`Modification du champ ${fieldName} pour le véhicule ${id} avec la valeur ${value}`);\r\n    \r\n    // Convertir les valeurs numériques si nécessaire\r\n    const parsedValue = fieldName === 'annee' || fieldName === 'kilometrage' ? parseInt(value) : value;\r\n    \r\n    // S'assurer que le véhicule existe dans l'état d'édition\r\n    if (!editingVehicules[id]) {\r\n      // Si le véhicule n'existe pas dans l'état d'édition, le récupérer depuis l'état des véhicules\r\n      const vehicule = vehicules.find(v => v.id === id);\r\n      if (vehicule) {\r\n        setEditingVehicules(prev => ({\r\n          ...prev,\r\n          [id]: { ...vehicule, [fieldName]: parsedValue }\r\n        }));\r\n      }\r\n    } else {\r\n      // Mettre à jour le véhicule existant\r\n      setEditingVehicules(prev => ({\r\n        ...prev,\r\n        [id]: {\r\n          ...prev[id],\r\n          [fieldName]: parsedValue\r\n        }\r\n      }));\r\n    }\r\n  };\r\n\r\n  const addNewVehicule = () => {\r\n    // Forcer le mode édition si ce n'est pas déjà le cas\r\n    if (!editMode) {\r\n      setEditMode(true);\r\n    }\r\n\r\n    const newVehicule: Partial<Vehicule> = {\r\n      id: `temp-${Date.now()}`, // Identifiant temporaire unique\r\n      immatriculation: '',\r\n      marque: '',\r\n      modele: '',\r\n      type: 'Voiture',\r\n      annee: new Date().getFullYear(),\r\n      statut: 'actif',\r\n      coursierAssigne: '',\r\n      kilometrage: 0\r\n    };\r\n    \r\n    // Ajouter la nouvelle ligne au début du tableau\r\n    setNewVehicules(prevNewVehicules => [newVehicule, ...prevNewVehicules]);\r\n    \r\n    // Ajouter un délai pour permettre le rendu\r\n    setTimeout(() => {\r\n      const firstInput = document.querySelector('.vehicules-table-container .new-vehicule-row input') as HTMLInputElement;\r\n      if (firstInput) {\r\n        firstInput.focus();\r\n      }\r\n    }, 100);\r\n  };\r\n\r\n  const handleNewVehiculeChange = (index: number, field: keyof Vehicule, value: any) => {\r\n    const updatedNewVehicules = [...newVehicules];\r\n    \r\n    // S'assurer que le véhicule existe à cet index\r\n    if (!updatedNewVehicules[index]) {\r\n      updatedNewVehicules[index] = {\r\n        id: `temp-${Date.now()}-${index}`,\r\n        immatriculation: '',\r\n        marque: '',\r\n        modele: '',\r\n        type: 'Voiture',\r\n        annee: new Date().getFullYear(),\r\n        statut: 'actif',\r\n        coursierAssigne: '',\r\n        kilometrage: 0\r\n      };\r\n    }\r\n    \r\n    updatedNewVehicules[index] = {\r\n      ...updatedNewVehicules[index],\r\n      [field]: value\r\n    };\r\n    \r\n    setNewVehicules(updatedNewVehicules);\r\n  };\r\n\r\n  const removeNewVehicule = (index: number) => {\r\n    setNewVehicules(newVehicules.filter((_, i) => i !== index));\r\n  };\r\n\r\n  const openModal = () => {\r\n    setCurrentVehicule({\r\n      immatriculation: '',\r\n      marque: '',\r\n      modele: '',\r\n      type: 'Voiture',\r\n      annee: new Date().getFullYear(),\r\n      statut: 'actif',\r\n      coursierAssigne: '',\r\n      kilometrage: 0\r\n    });\r\n    setIsEditing(false);\r\n    setIsModalOpen(true);\r\n  };\r\n\r\n  const closeModal = () => {\r\n    setIsModalOpen(false);\r\n    setCurrentVehicule({\r\n      immatriculation: '',\r\n      marque: '',\r\n      modele: '',\r\n      type: 'Voiture',\r\n      annee: new Date().getFullYear(),\r\n      statut: 'actif',\r\n      coursierAssigne: '',\r\n      kilometrage: 0\r\n    });\r\n    setIsEditing(false);\r\n  };\r\n\r\n  const getStatusClass = (statut: string) => {\r\n    switch (statut) {\r\n      case 'actif':\r\n        return 'livré';\r\n      case 'maintenance':\r\n        return 'en-cours';\r\n      case 'inactif':\r\n        return 'en-cours';\r\n      default:\r\n        return '';\r\n    }\r\n  };\r\n\r\n  // Fonction pour gérer le changement de pôle\r\n  const handlePoleChange = (pole: string) => {\r\n    setSelectedPole(pole);\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"loading-container\">\r\n        <div className=\"loading-spinner\"></div>\r\n        <p>Chargement des véhicules...</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (error) {\r\n    return <div className=\"error\">{error}</div>;\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <div className=\"section-header\">\r\n        <h2 className=\"section-title\">Véhicules</h2>\r\n      </div>\r\n      \r\n      <div className=\"sticky-header-container\">\r\n        <div className=\"header-actions\">\r\n          {editMode ? (\r\n            <>\r\n              <button \r\n                className=\"button\" \r\n                onClick={saveAllChanges}\r\n                disabled={loading || (selectedVehicules.length === 0 && newVehicules.length === 0)}\r\n                style={{ \r\n                  backgroundColor: '#4CAF50', // Vert\r\n                  color: 'white',\r\n                  fontWeight: 'bold'\r\n                }}\r\n                title=\"Enregistrer les modifications\"\r\n              >\r\n                <i className=\"fas fa-save\"></i> Enr. {selectedVehicules.length > 0 || newVehicules.length > 0 ? \r\n                  `(${selectedVehicules.length}${newVehicules.length > 0 ? `+${newVehicules.length}` : ''})` : \r\n                  ''}\r\n              </button>\r\n              <button \r\n                className=\"button button-secondary\" \r\n                onClick={() => {\r\n                  if (window.confirm(\"Êtes-vous sûr de vouloir annuler toutes les modifications ?\")) {\r\n                    setEditingVehicules({});\r\n                    setNewVehicules([]);\r\n                    setSelectedVehicules([]);\r\n                    setSelectAll(false);\r\n                    setEditMode(false);\r\n                  }\r\n                }}\r\n                style={{ marginLeft: '5px' }}\r\n                disabled={loading}\r\n                title=\"Annuler les modifications\"\r\n              >\r\n                <i className=\"fas fa-times\"></i> Annuler\r\n              </button>\r\n              <button \r\n                className=\"button\" \r\n                onClick={addNewVehicule}\r\n                style={{ \r\n                  marginLeft: '5px',\r\n                  backgroundColor: '#FF9800', // Orange\r\n                  color: 'white',\r\n                  fontWeight: 'bold'\r\n                }}\r\n                disabled={loading}\r\n                title=\"Ajouter un nouveau véhicule\"\r\n              >\r\n                <i className=\"fas fa-plus\"></i> Ajouter\r\n              </button>\r\n              <button \r\n                className=\"button button-danger\" \r\n                onClick={handleDeleteSelected}\r\n                disabled={selectedVehicules.length === 0 || loading}\r\n                style={{ \r\n                  marginLeft: '5px',\r\n                  backgroundColor: '#f44336', \r\n                  color: 'white',\r\n                  fontWeight: 'bold'\r\n                }}\r\n                title=\"Supprimer les véhicules sélectionnés\"\r\n              >\r\n                <i className=\"fas fa-trash-alt\"></i> Sup. ({selectedVehicules.length})\r\n              </button>\r\n            </>\r\n          ) : (\r\n            <button \r\n              className=\"button\" \r\n              onClick={toggleEditMode}\r\n            >\r\n              <i className=\"fas fa-edit\"></i> Modifier\r\n            </button>\r\n          )}\r\n        </div>\r\n        \r\n        <div className=\"quick-search-container\" style={{ marginTop: '10px' }}>\r\n          <input\r\n            type=\"text\"\r\n            className=\"quick-search-input\"\r\n            placeholder=\"Recherche rapide...\"\r\n            value={quickSearch}\r\n            onChange={(e) => setQuickSearch(e.target.value)}\r\n            disabled={loading}\r\n          />\r\n          <div className=\"pole-filter\">\r\n            <PoleFilter\r\n              onPoleChange={handlePoleChange}\r\n              selectedPole={selectedPole}\r\n              label=\"Filtrer par pôle\"\r\n              className=\"pole-filter-component\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      <div className=\"vehicules-table-container\" style={{ overflowX: 'auto' }}>\r\n        <div className=\"results-info\">\r\n          <p>{filteredVehicules.length} résultat(s) trouvé(s){quickSearch ? ` pour la recherche \"${quickSearch}\"` : ''}</p>\r\n        </div>\r\n        \r\n        <table className={`data-table ${editMode ? 'editing' : ''}`}>\r\n          <thead>\r\n            <tr>\r\n              {editMode && (\r\n                <th>\r\n                  <input \r\n                    type=\"checkbox\" \r\n                    checked={selectAll}\r\n                    onChange={handleSelectAllChange}\r\n                    aria-label=\"Sélectionner tous les véhicules\"\r\n                  />\r\n                </th>\r\n              )}\r\n              <th>PÔLE</th>\r\n              <th>Immatriculation</th>\r\n              <th>Marque</th>\r\n              <th>Modèle</th>\r\n              <th>Type</th>\r\n              <th>Année</th>\r\n              <th>Statut</th>\r\n              <th>Dernier Entretien</th>\r\n              <th>Coursier Assigné</th>\r\n              <th>Kilométrage</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {/* Nouvelles lignes temporaires */}\r\n            {editMode && newVehicules.map((newVehicule, index) => (\r\n              <tr key={newVehicule.id} className=\"new-vehicule-row\">\r\n                <td style={{display: 'none'}}>\r\n                  {/* Cellule masquée pour maintenir l'alignement */}\r\n                </td>\r\n                <td>\r\n                  <PoleSelector\r\n                    value={newVehicule.pole || ''}\r\n                    onChange={(value) => handleNewVehiculeChange(index, 'pole', value)}\r\n                    placeholder=\"Sélectionner un pôle\"\r\n                    style={{ width: '100%' }}\r\n                    showSearch\r\n                    allowClear\r\n                    title=\"Pôle du véhicule\"\r\n                  />\r\n                </td>\r\n                <td>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={newVehicule.immatriculation || ''}\r\n                    onChange={(e) => handleNewVehiculeChange(index, 'immatriculation', e.target.value)}\r\n                    className=\"inline-edit-input\"\r\n                    placeholder=\"Immatriculation\"\r\n                    aria-label=\"Immatriculation du nouveau véhicule\"\r\n                    name={`new-vehicule-${index}-immatriculation`}\r\n                  />\r\n                </td>\r\n                <td>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={newVehicule.marque || ''}\r\n                    onChange={(e) => handleNewVehiculeChange(index, 'marque', e.target.value)}\r\n                    className=\"inline-edit-input\"\r\n                    placeholder=\"Marque\"\r\n                    aria-label=\"Marque du nouveau véhicule\"\r\n                    name={`new-vehicule-${index}-marque`}\r\n                  />\r\n                </td>\r\n                <td>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={newVehicule.modele || ''}\r\n                    onChange={(e) => handleNewVehiculeChange(index, 'modele', e.target.value)}\r\n                    className=\"inline-edit-input\"\r\n                    placeholder=\"Modèle\"\r\n                    aria-label=\"Modèle du nouveau véhicule\"\r\n                    name={`new-vehicule-${index}-modele`}\r\n                  />\r\n                </td>\r\n                <td>\r\n                  <select\r\n                    value={newVehicule.type || 'Voiture'}\r\n                    onChange={(e) => handleNewVehiculeChange(index, 'type', e.target.value)}\r\n                    className=\"inline-edit-select\"\r\n                    aria-label=\"Type du nouveau véhicule\"\r\n                    name={`new-vehicule-${index}-type`}\r\n                  >\r\n                    <option value=\"Voiture\">Voiture</option>\r\n                    <option value=\"Utilitaire\">Utilitaire</option>\r\n                    <option value=\"Camionnette\">Camionnette</option>\r\n                  </select>\r\n                </td>\r\n                <td>\r\n                  <input\r\n                    type=\"number\"\r\n                    value={newVehicule.annee || new Date().getFullYear()}\r\n                    onChange={(e) => handleNewVehiculeChange(index, 'annee', e.target.value)}\r\n                    className=\"inline-edit-input\"\r\n                    placeholder=\"Année\"\r\n                    aria-label=\"Année du nouveau véhicule\"\r\n                    name={`new-vehicule-${index}-annee`}\r\n                  />\r\n                </td>\r\n                <td>\r\n                  <select\r\n                    value={newVehicule.statut || 'actif'}\r\n                    onChange={(e) => handleNewVehiculeChange(index, 'statut', e.target.value)}\r\n                    className=\"inline-edit-select\"\r\n                    aria-label=\"Statut du nouveau véhicule\"\r\n                    name={`new-vehicule-${index}-statut`}\r\n                  >\r\n                    <option value=\"actif\">Actif</option>\r\n                    <option value=\"maintenance\">Maintenance</option>\r\n                    <option value=\"inactif\">Inactif</option>\r\n                  </select>\r\n                </td>\r\n                <td>\r\n                  <input\r\n                    type=\"date\"\r\n                    value={newVehicule.dernierEntretien || ''}\r\n                    onChange={(e) => handleNewVehiculeChange(index, 'dernierEntretien', e.target.value)}\r\n                    className=\"inline-edit-input\"\r\n                    aria-label=\"Date du dernier entretien du nouveau véhicule\"\r\n                    name={`new-vehicule-${index}-dernierEntretien`}\r\n                  />\r\n                </td>\r\n                <td>\r\n                  <input\r\n                    type=\"text\"\r\n                    value={newVehicule.coursierAssigne || ''}\r\n                    onChange={(e) => handleNewVehiculeChange(index, 'coursierAssigne', e.target.value)}\r\n                    className=\"inline-edit-input\"\r\n                    placeholder=\"Coursier\"\r\n                    aria-label=\"Coursier assigné au nouveau véhicule\"\r\n                    name={`new-vehicule-${index}-coursierAssigne`}\r\n                  />\r\n                </td>\r\n                <td>\r\n                  <input\r\n                    type=\"number\"\r\n                    value={newVehicule.kilometrage || 0}\r\n                    onChange={(e) => handleNewVehiculeChange(index, 'kilometrage', e.target.value)}\r\n                    className=\"inline-edit-input\"\r\n                    placeholder=\"Kilométrage\"\r\n                    aria-label=\"Kilométrage du nouveau véhicule\"\r\n                    name={`new-vehicule-${index}-kilometrage`}\r\n                  />\r\n                </td>\r\n              </tr>\r\n            ))}\r\n\r\n            {filteredVehicules.map((vehicule) => (\r\n              <tr key={vehicule.id} className={selectedVehicules.includes(vehicule.id) ? 'selected-row' : ''}>\r\n                {editMode && (\r\n                  <td>\r\n                    <input \r\n                      type=\"checkbox\" \r\n                      checked={selectedVehicules.includes(vehicule.id)} \r\n                      onChange={() => handleSelectVehicule(vehicule.id)}\r\n                      aria-label={`Sélectionner le véhicule ${vehicule.immatriculation}`}\r\n                    />\r\n                  </td>\r\n                )}\r\n                <td>\r\n                  {editMode ? (\r\n                    <PoleSelector\r\n                      value={editingVehicules[vehicule.id]?.pole || vehicule.pole || ''}\r\n                      onChange={(value) => handleCellChange(vehicule.id, 'pole', value)}\r\n                      placeholder=\"Sélectionner un pôle\"\r\n                      style={{ width: '100%' }}\r\n                      showSearch\r\n                      allowClear\r\n                      title=\"Pôle du véhicule\"\r\n                    />\r\n                  ) : (\r\n                    getPoleNameById(vehicule.pole)\r\n                  )}\r\n                </td>\r\n                <td>\r\n                  {editMode ? (\r\n                    <input\r\n                      type=\"text\"\r\n                      value={editingVehicules[vehicule.id]?.immatriculation || vehicule.immatriculation}\r\n                      onChange={(e) => handleCellChange(vehicule.id, 'immatriculation', e.target.value)}\r\n                      className=\"inline-edit-input\"\r\n                      placeholder=\"Immatriculation\"\r\n                    />\r\n                  ) : (\r\n                    vehicule.immatriculation || '-'\r\n                  )}\r\n                </td>\r\n                <td>\r\n                  {editMode ? (\r\n                    <input\r\n                      type=\"text\"\r\n                      value={editingVehicules[vehicule.id]?.marque || vehicule.marque}\r\n                      onChange={(e) => handleCellChange(vehicule.id, 'marque', e.target.value)}\r\n                      className=\"inline-edit-input\"\r\n                      placeholder=\"Marque\"\r\n                    />\r\n                  ) : (\r\n                    vehicule.marque || '-'\r\n                  )}\r\n                </td>\r\n                <td>\r\n                  {editMode ? (\r\n                    <input\r\n                      type=\"text\"\r\n                      value={editingVehicules[vehicule.id]?.modele || vehicule.modele}\r\n                      onChange={(e) => handleCellChange(vehicule.id, 'modele', e.target.value)}\r\n                      className=\"inline-edit-input\"\r\n                      placeholder=\"Modèle\"\r\n                    />\r\n                  ) : (\r\n                    vehicule.modele || '-'\r\n                  )}\r\n                </td>\r\n                <td>\r\n                  {editMode ? (\r\n                    <select\r\n                      value={editingVehicules[vehicule.id]?.type || vehicule.type}\r\n                      onChange={(e) => handleCellChange(vehicule.id, 'type', e.target.value)}\r\n                      className=\"inline-edit-select\"\r\n                      aria-label={`Modifier le type du véhicule ${vehicule.immatriculation}`}\r\n                    >\r\n                      <option value=\"Voiture\">Voiture</option>\r\n                      <option value=\"Utilitaire\">Utilitaire</option>\r\n                      <option value=\"Camionnette\">Camionnette</option>\r\n                    </select>\r\n                  ) : (\r\n                    vehicule.type || '-'\r\n                  )}\r\n                </td>\r\n                <td>\r\n                  {editMode ? (\r\n                    <input\r\n                      type=\"number\"\r\n                      value={editingVehicules[vehicule.id]?.annee || vehicule.annee}\r\n                      onChange={(e) => handleEditInputChange(e, vehicule.id)}\r\n                      className=\"inline-edit-input\"\r\n                      aria-label={`Modifier l'année du véhicule ${vehicule.immatriculation}`}\r\n                      name={`vehicule-${vehicule.id}-annee`}\r\n                    />\r\n                  ) : (\r\n                    vehicule.annee ? vehicule.annee.toString() : '-'\r\n                  )}\r\n                </td>\r\n                <td>\r\n                  {editMode ? (\r\n                    <select\r\n                      value={editingVehicules[vehicule.id]?.statut || vehicule.statut}\r\n                      onChange={(e) => handleEditInputChange(e, vehicule.id)}\r\n                      className=\"inline-edit-select\"\r\n                      aria-label={`Modifier le statut du véhicule ${vehicule.immatriculation}`}\r\n                      name={`vehicule-${vehicule.id}-statut`}\r\n                    >\r\n                      <option value=\"actif\">Actif</option>\r\n                      <option value=\"maintenance\">Maintenance</option>\r\n                      <option value=\"inactif\">Inactif</option>\r\n                    </select>\r\n                  ) : (\r\n                    vehicule.statut === 'actif' ? 'Actif' : \r\n                    vehicule.statut === 'maintenance' ? 'Maintenance' : \r\n                    'Inactif'\r\n                  )}\r\n                </td>\r\n                <td>\r\n                  {editMode ? (\r\n                    <input\r\n                      type=\"date\"\r\n                      value={editingVehicules[vehicule.id]?.dernierEntretien || vehicule.dernierEntretien || ''}\r\n                      onChange={(e) => handleEditInputChange(e, vehicule.id)}\r\n                      className=\"inline-edit-input\"\r\n                      aria-label={`Modifier la date du dernier entretien du véhicule ${vehicule.immatriculation}`}\r\n                      name={`vehicule-${vehicule.id}-dernierEntretien`}\r\n                    />\r\n                  ) : (\r\n                    vehicule.dernierEntretien || '-'\r\n                  )}\r\n                </td>\r\n                <td>\r\n                  {editMode ? (\r\n                    <input\r\n                      type=\"text\"\r\n                      value={editingVehicules[vehicule.id]?.coursierAssigne || vehicule.coursierAssigne || ''}\r\n                      onChange={(e) => handleEditInputChange(e, vehicule.id)}\r\n                      className=\"inline-edit-input\"\r\n                      aria-label={`Modifier le coursier assigné au véhicule ${vehicule.immatriculation}`}\r\n                      name={`vehicule-${vehicule.id}-coursierAssigne`}\r\n                    />\r\n                  ) : (\r\n                    vehicule.coursierAssigne || '-'\r\n                  )}\r\n                </td>\r\n                <td>\r\n                  {editMode ? (\r\n                    <input\r\n                      type=\"number\"\r\n                      value={editingVehicules[vehicule.id]?.kilometrage || vehicule.kilometrage}\r\n                      onChange={(e) => handleEditInputChange(e, vehicule.id)}\r\n                      className=\"inline-edit-input\"\r\n                      aria-label={`Modifier le kilométrage du véhicule ${vehicule.immatriculation}`}\r\n                      name={`vehicule-${vehicule.id}-kilometrage`}\r\n                    />\r\n                  ) : (\r\n                    vehicule.kilometrage ? vehicule.kilometrage.toString() : '-'\r\n                  )}\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n      \r\n      {/* Modal pour ajouter/modifier un véhicule */}\r\n      {isModalOpen && (\r\n        <div className=\"modal-overlay\">\r\n          <div className=\"modal-content\">\r\n            <div className=\"modal-header\">\r\n              <h3 className=\"modal-title\">{isEditing ? 'Modifier le véhicule' : 'Ajouter un véhicule'}</h3>\r\n              <button className=\"modal-close\" onClick={closeModal}>&times;</button>\r\n            </div>\r\n            \r\n            <form onSubmit={handleSubmit}>\r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"immatriculation\" className=\"form-label\">Immatriculation</label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"immatriculation\"\r\n                  name=\"immatriculation\"\r\n                  className=\"form-input\"\r\n                  value={currentVehicule.immatriculation}\r\n                  onChange={handleInputChange}\r\n                  required\r\n                />\r\n              </div>\r\n              \r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"marque\" className=\"form-label\">Marque</label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"marque\"\r\n                  name=\"marque\"\r\n                  className=\"form-input\"\r\n                  value={currentVehicule.marque}\r\n                  onChange={handleInputChange}\r\n                  required\r\n                />\r\n              </div>\r\n              \r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"modele\" className=\"form-label\">Modèle</label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"modele\"\r\n                  name=\"modele\"\r\n                  className=\"form-input\"\r\n                  value={currentVehicule.modele}\r\n                  onChange={handleInputChange}\r\n                  required\r\n                />\r\n              </div>\r\n              \r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"type\" className=\"form-label\">Type</label>\r\n                <select\r\n                  id=\"type\"\r\n                  name=\"type\"\r\n                  className=\"form-select\"\r\n                  value={currentVehicule.type}\r\n                  onChange={handleInputChange}\r\n                  required\r\n                >\r\n                  <option value=\"Voiture\">Voiture</option>\r\n                  <option value=\"Utilitaire\">Utilitaire</option>\r\n                  <option value=\"Moto\">Moto</option>\r\n                  <option value=\"Vélo\">Vélo</option>\r\n                </select>\r\n              </div>\r\n              \r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"annee\" className=\"form-label\">Année</label>\r\n                <input\r\n                  type=\"number\"\r\n                  id=\"annee\"\r\n                  name=\"annee\"\r\n                  className=\"form-input\"\r\n                  value={currentVehicule.annee}\r\n                  onChange={handleInputChange}\r\n                  min=\"2000\"\r\n                  max={new Date().getFullYear()}\r\n                  required\r\n                />\r\n              </div>\r\n              \r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"kilometrage\" className=\"form-label\">Kilométrage</label>\r\n                <input\r\n                  type=\"number\"\r\n                  id=\"kilometrage\"\r\n                  name=\"kilometrage\"\r\n                  className=\"form-input\"\r\n                  value={currentVehicule.kilometrage}\r\n                  onChange={handleInputChange}\r\n                  min=\"0\"\r\n                  required\r\n                />\r\n              </div>\r\n              \r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"dernierEntretien\" className=\"form-label\">Dernier Entretien</label>\r\n                <div className=\"custom-datepicker-wrapper\">\r\n                  <DatePicker\r\n                    selected={currentVehicule.dernierEntretien && currentVehicule.dernierEntretien !== '' \r\n                      ? new Date(currentVehicule.dernierEntretien) \r\n                      : null}\r\n                    onChange={(date: Date | null) => {\r\n                      if (date) {\r\n                        const formattedDate = date.toISOString().split('T')[0];\r\n                        setCurrentVehicule(prev => ({ ...prev, dernierEntretien: formattedDate }));\r\n                      } else {\r\n                        setCurrentVehicule(prev => ({ ...prev, dernierEntretien: undefined }));\r\n                      }\r\n                    }}\r\n                    locale=\"fr\"\r\n                    dateFormat=\"dd/MM/yyyy\"\r\n                    placeholderText=\"JJ/MM/AAAA\"\r\n                    className=\"form-input custom-datepicker-input\"\r\n                    popperPlacement=\"bottom-start\"\r\n                    showMonthDropdown\r\n                    showYearDropdown\r\n                    dropdownMode=\"select\"\r\n                    isClearable\r\n                  />\r\n                </div>\r\n              </div>\r\n              \r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"coursierAssigne\" className=\"form-label\">Coursier Assigné</label>\r\n                <input\r\n                  type=\"text\"\r\n                  id=\"coursierAssigne\"\r\n                  name=\"coursierAssigne\"\r\n                  className=\"form-input\"\r\n                  value={currentVehicule.coursierAssigne || ''}\r\n                  onChange={handleInputChange}\r\n                />\r\n              </div>\r\n              \r\n              <div className=\"form-group\">\r\n                <label htmlFor=\"statut\" className=\"form-label\">Statut</label>\r\n                <select\r\n                  id=\"statut\"\r\n                  name=\"statut\"\r\n                  className=\"form-select\"\r\n                  value={currentVehicule.statut}\r\n                  onChange={handleInputChange}\r\n                  required\r\n                >\r\n                  <option value=\"actif\">Actif</option>\r\n                  <option value=\"maintenance\">Maintenance</option>\r\n                  <option value=\"inactif\">Inactif</option>\r\n                </select>\r\n              </div>\r\n              \r\n              <div className=\"modal-footer\">\r\n                <button type=\"button\" className=\"button button-secondary\" onClick={closeModal}>\r\n                  Annuler\r\n                </button>\r\n                <button type=\"submit\" className=\"button\">\r\n                  {isEditing ? 'Mettre à jour' : 'Ajouter'}\r\n                </button>\r\n              </div>\r\n            </form>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Vehicules;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}