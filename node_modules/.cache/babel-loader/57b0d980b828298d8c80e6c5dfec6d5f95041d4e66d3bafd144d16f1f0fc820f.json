{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Select,MenuItem,FormControl,InputLabel}from'@mui/material';import{collection,getDocs}from'firebase/firestore';import{db}from'../config/firebase';import'./PoleFilter.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const PoleFilter=_ref=>{let{onPoleChange,selectedPole,label=\"Filtrer par pôle\",className=\"\"}=_ref;const[poles,setPoles]=useState([]);const[loading,setLoading]=useState(true);useEffect(()=>{fetchPoles();},[]);const fetchPoles=async()=>{try{setLoading(true);// Récupérer les pôles depuis la collection dédiée 'poles'\nconst polesRef=collection(db,'poles');const snapshot=await getDocs(polesRef);// Extraire les noms des pôles\nconst polesArray=snapshot.docs.map(doc=>doc.data().nom).filter(Boolean)// Filtrer les valeurs nulles ou vides\n.sort((a,b)=>a.localeCompare(b,'fr',{sensitivity:'base'}));console.log('Liste des pôles disponibles:',polesArray);setPoles(polesArray);setLoading(false);}catch(error){console.error('Erreur lors du chargement des pôles:',error);setPoles([]);setLoading(false);}};const handleChange=event=>{const newPole=event.target.value;onPoleChange(newPole);};return/*#__PURE__*/_jsx(\"div\",{className:`pole-filter-container ${className}`,children:/*#__PURE__*/_jsxs(FormControl,{fullWidth:true,variant:\"outlined\",size:\"small\",children:[/*#__PURE__*/_jsx(InputLabel,{id:\"pole-filter-label\",children:label}),/*#__PURE__*/_jsxs(Select,{labelId:\"pole-filter-label\",id:\"pole-filter\",value:selectedPole,onChange:handleChange,label:label,disabled:loading,className:\"pole-filter-select\",children:[/*#__PURE__*/_jsx(MenuItem,{value:\"\",children:/*#__PURE__*/_jsx(\"em\",{children:\"Tous les p\\xF4les\"})}),poles.map(pole=>/*#__PURE__*/_jsx(MenuItem,{value:pole,children:pole},pole))]})]})});};export default PoleFilter;","map":{"version":3,"names":["React","useState","useEffect","Select","MenuItem","FormControl","InputLabel","collection","getDocs","db","jsx","_jsx","jsxs","_jsxs","PoleFilter","_ref","onPoleChange","selectedPole","label","className","poles","setPoles","loading","setLoading","fetchPoles","polesRef","snapshot","polesArray","docs","map","doc","data","nom","filter","Boolean","sort","a","b","localeCompare","sensitivity","console","log","error","handleChange","event","newPole","target","value","children","fullWidth","variant","size","id","labelId","onChange","disabled","pole"],"sources":["C:/Users/LS_110/Documents/GitHub/inovie-SCAN-web-main/src/components/PoleFilter.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Select, MenuItem, FormControl, InputLabel } from '@mui/material';\nimport { collection, getDocs } from 'firebase/firestore';\nimport { db } from '../config/firebase';\nimport './PoleFilter.css';\n\ninterface PoleFilterProps {\n  onPoleChange: (pole: string) => void;\n  selectedPole: string;\n  label?: string;\n  className?: string;\n}\n\nconst PoleFilter: React.FC<PoleFilterProps> = ({ \n  onPoleChange, \n  selectedPole, \n  label = \"Filtrer par pôle\", \n  className = \"\" \n}) => {\n  const [poles, setPoles] = useState<string[]>([]);\n  const [loading, setLoading] = useState<boolean>(true);\n\n  useEffect(() => {\n    fetchPoles();\n  }, []);\n\n  const fetchPoles = async () => {\n    try {\n      setLoading(true);\n      \n      // Récupérer les pôles depuis la collection dédiée 'poles'\n      const polesRef = collection(db, 'poles');\n      const snapshot = await getDocs(polesRef);\n      \n      // Extraire les noms des pôles\n      const polesArray = snapshot.docs\n        .map(doc => doc.data().nom as string)\n        .filter(Boolean) // Filtrer les valeurs nulles ou vides\n        .sort((a, b) => a.localeCompare(b, 'fr', { sensitivity: 'base' }));\n      \n      console.log('Liste des pôles disponibles:', polesArray);\n      setPoles(polesArray);\n      setLoading(false);\n    } catch (error) {\n      console.error('Erreur lors du chargement des pôles:', error);\n      setPoles([]);\n      setLoading(false);\n    }\n  };\n\n  const handleChange = (event: React.ChangeEvent<{ value: unknown }>) => {\n    const newPole = event.target.value as string;\n    onPoleChange(newPole);\n  };\n\n  return (\n    <div className={`pole-filter-container ${className}`}>\n      <FormControl fullWidth variant=\"outlined\" size=\"small\">\n        <InputLabel id=\"pole-filter-label\">{label}</InputLabel>\n        <Select\n          labelId=\"pole-filter-label\"\n          id=\"pole-filter\"\n          value={selectedPole}\n          onChange={handleChange as any}\n          label={label}\n          disabled={loading}\n          className=\"pole-filter-select\"\n        >\n          <MenuItem value=\"\">\n            <em>Tous les pôles</em>\n          </MenuItem>\n          {poles.map((pole) => (\n            <MenuItem key={pole} value={pole}>\n              {pole}\n            </MenuItem>\n          ))}\n        </Select>\n      </FormControl>\n    </div>\n  );\n};\n\nexport default PoleFilter; \r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}