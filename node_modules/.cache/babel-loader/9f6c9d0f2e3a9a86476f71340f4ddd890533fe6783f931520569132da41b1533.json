{"ast":null,"code":"import React,{createContext,useContext,useState,useEffect}from'react';import{auth,db}from'../config/firebase';import{onAuthStateChanged,signOut,signInWithEmailAndPassword}from'firebase/auth';import{doc,setDoc,getDoc}from'firebase/firestore';// Interface pour le contexte d'authentification\nimport{jsx as _jsx}from\"react/jsx-runtime\";// Cr√©ation du contexte avec une valeur par d√©faut\nconst AuthContext=/*#__PURE__*/createContext({currentUser:null,loading:true,error:null,logout:async()=>{},hasPermission:()=>false,isAllowedRoute:()=>false,login:async()=>{throw new Error(\"Login function not implemented\");}});// Hook personnalis√© pour utiliser le contexte d'authentification\nexport const useAuth=()=>useContext(AuthContext);// D√©finition des permissions par r√¥le\nconst rolePermissions={Administrateur:['dashboard.view','passages.view','passages.create','passages.edit','passages.delete','sites.view','sites.create','sites.edit','sites.delete','tournees.view','tournees.create','tournees.edit','tournees.delete','vehicules.view','vehicules.create','vehicules.edit','vehicules.delete','users.view','users.create','users.edit','users.delete','init-passages.view','carte.view','carte.edit'],Utilisateur:['dashboard.view','passages.view','passages.create','passages.edit','sites.view','sites.create','sites.edit','tournees.view','tournees.create','tournees.edit','vehicules.view','vehicules.create','vehicules.edit','users.view','users.create','users.edit','init-passages.view','carte.view'],Coursier:['passages.view','passages.create','passages.edit']};// Mapping des routes vers les permissions requises\nconst routePermissions={'/':'dashboard.view','/passages':'passages.view','/sites':'sites.view','/tournees':'tournees.view','/vehicules':'vehicules.view','/admin/users':'users.view','/admin':'dashboard.view',// L'admin panel n√©cessite des permissions sp√©cifiques pour chaque onglet\n'/init-passages':'init-passages.view','/map':'carte.view'};// D√©finition des routes autoris√©es par r√¥le\nconst allowedRoutes={Administrateur:['/','/passages','/sites','/tournees','/vehicules','/admin/users','/init-passages'],Utilisateur:['/','/passages','/sites','/tournees','/vehicules','/admin/users','/init-passages'],Coursier:['/passages']};// Fournisseur du contexte d'authentification\nexport const AuthProvider=_ref=>{let{children}=_ref;const[currentUser,setCurrentUser]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);// Fonction pour v√©rifier si l'utilisateur a une permission sp√©cifique\nconst hasPermission=permission=>{var _currentUser$email;if(!currentUser)return false;// Cas sp√©cial pour Micka√´l Volle (a toujours toutes les permissions)\nif(((_currentUser$email=currentUser.email)===null||_currentUser$email===void 0?void 0:_currentUser$email.toLowerCase())==='mickael.volle@inovie.fr'){return true;}const permissions=rolePermissions[currentUser.role]||[];return permissions.includes(permission);};// Fonction pour v√©rifier si l'utilisateur a acc√®s √† une route sp√©cifique\nconst isAllowedRoute=route=>{var _currentUser$email2;if(!currentUser)return false;// Cas sp√©cial pour Micka√´l Volle (a acc√®s √† toutes les routes)\nif(((_currentUser$email2=currentUser.email)===null||_currentUser$email2===void 0?void 0:_currentUser$email2.toLowerCase())==='mickael.volle@inovie.fr'){return true;}// 1. V√©rifier si l'utilisateur a la permission sp√©cifique requise pour cette route\nconst requiredPermission=routePermissions[route];if(requiredPermission&&hasPermission(requiredPermission)){return true;}// 2. V√©rifier les routes autoris√©es comme fallback\nconst routes=allowedRoutes[currentUser.role]||[];// V√©rifier si la route exacte est autoris√©e\nif(routes.includes(route))return true;// V√©rifier si une route parente est autoris√©e (pour les sous-routes)\nreturn routes.some(allowedRoute=>route.startsWith(allowedRoute)&&allowedRoute!=='/');};// Fonction de d√©connexion\nconst logout=async()=>{try{// Mettre √† jour l'√©tat imm√©diatement pour une exp√©rience utilisateur plus r√©active\nsetCurrentUser(null);// D√©clencher la d√©connexion Firebase en arri√®re-plan sans attendre\nsignOut(auth).catch(error=>{console.error('Erreur lors de la d√©connexion Firebase:',error);});}catch(error){console.error('Erreur lors de la d√©connexion:',error);setError('Erreur lors de la d√©connexion');// En cas d'erreur, continuer en for√ßant la d√©connexion c√¥t√© client\nsetCurrentUser(null);}};// Fonction pour extraire le pr√©nom et nom √† partir de l'email\nconst extractNameFromEmail=email=>{const parts=email.split('@')[0].split('.');if(parts.length>1){// Cas o√π l'email est prenom.nom@domaine.com\nreturn parts.map(part=>part.charAt(0).toUpperCase()+part.slice(1)).join(' ');}// Sinon, utiliser la partie avant @\nreturn parts[0].split('-').map(part=>part.charAt(0).toUpperCase()+part.slice(1)).join(' ');};const login=async(email,password)=>{try{setLoading(true);setError(null);// Connexion avec Firebase Auth\nconst userCredential=await signInWithEmailAndPassword(auth,email,password);const firebaseUser=userCredential.user;console.log('üîç D√©tails de l\\'utilisateur Firebase:',{uid:firebaseUser.uid,email:firebaseUser.email,displayName:firebaseUser.displayName});// Rechercher l'utilisateur dans Firestore\nconst userDocRef=doc(db,'users',firebaseUser.uid);const userDoc=await getDoc(userDocRef);if(!userDoc.exists()){// MODIFICATION : Bloquer la cr√©ation automatique\nconsole.error('‚ùå Aucun compte utilisateur trouv√©. Veuillez contacter l\\'administrateur.');throw new Error('Compte utilisateur non trouv√©. Contactez votre administrateur.');}const firestoreData=userDoc.data();console.log('üîç Donn√©es Firestore de l\\'utilisateur:',firestoreData);const userData={id:userDoc.id,identifiant:firestoreData.identifiant||email.split('@')[0],email:firestoreData.email||email,nom:firestoreData.nom||firestoreData.displayName||firebaseUser.displayName||extractNameFromEmail(email),role:firestoreData.role||'Utilisateur',pole:firestoreData.pole||'',statut:firestoreData.statut||'actif',uid:firebaseUser.uid,permissions:firestoreData.permissions||[],dateCreation:firestoreData.dateCreation,dateModification:firestoreData.dateModification};console.log('üè∑Ô∏è Nom d\\'utilisateur final:',userData.nom);// Cas sp√©cial pour Micka√´l Volle\nif(email.toLowerCase()==='mickael.volle@inovie.fr'){userData.role='Administrateur';userData.pole='Informatique';userData.permissions=rolePermissions['Administrateur'];}console.log('üë§ Donn√©es utilisateur finales:',userData);setCurrentUser(userData);return userData;}catch(error){console.error('Erreur lors de la connexion:',error);let errorMessage='Erreur lors de la connexion';if(error.code==='auth/invalid-credential'){errorMessage='Compte non trouv√© ou identifiants incorrects';}else if(error.code==='auth/too-many-requests'){errorMessage='Trop de tentatives de connexion. Veuillez r√©essayer plus tard.';}setError(errorMessage);throw new Error(errorMessage);}finally{setLoading(false);}};// Effet pour g√©rer l'√©tat d'authentification\nuseEffect(()=>{console.log(\"‚úÖ Initialisation du gestionnaire d'authentification Firebase\");const unsubscribe=onAuthStateChanged(auth,async firebaseUser=>{console.log('üîç √âtat de l\\'authentification chang√©:',firebaseUser?firebaseUser.email:'Aucun utilisateur connect√©');try{if(firebaseUser){// V√©rifier la connectivit√© r√©seau\nif(!navigator.onLine){console.warn('‚ö†Ô∏è Mode hors ligne d√©tect√©. Utilisation des donn√©es en cache.');const cachedUser=localStorage.getItem('currentUser');if(cachedUser){const parsedUser=JSON.parse(cachedUser);setCurrentUser(parsedUser);setLoading(false);return;}}// Configuration de la persistance r√©seau avec des tentatives de r√©cup√©ration\nconst userDocRef=doc(db,'users',firebaseUser.uid);// Ajouter un timeout et des tentatives de r√©cup√©ration\nconst fetchUserWithRetry=async function(){let retries=arguments.length>0&&arguments[0]!==undefined?arguments[0]:3;try{const userDoc=await getDoc(userDocRef);if(userDoc.exists()){const userData=userDoc.data();// Enrichir les donn√©es utilisateur si n√©cessaire\nconst enrichedUserData={...userData,id:userDoc.id,uid:firebaseUser.uid,nom:userData.nom||firebaseUser.displayName||extractNameFromEmail(firebaseUser.email||'')||'Utilisateur',email:userData.email||firebaseUser.email||'',permissions:userData.permissions||[],dateModification:new Date().toISOString()};console.log('üë§ Donn√©es utilisateur r√©cup√©r√©es:',enrichedUserData);// Sauvegarder en cache local\nlocalStorage.setItem('currentUser',JSON.stringify(enrichedUserData));setCurrentUser(enrichedUserData);setLoading(false);}else{var _firebaseUser$email;console.warn('‚ùå Aucun document utilisateur trouv√© pour l\\'UID:',firebaseUser.uid);// Cr√©er un document utilisateur par d√©faut\nconst defaultUserData={id:firebaseUser.uid,uid:firebaseUser.uid,identifiant:((_firebaseUser$email=firebaseUser.email)===null||_firebaseUser$email===void 0?void 0:_firebaseUser$email.split('@')[0])||'utilisateur',email:firebaseUser.email||'',nom:extractNameFromEmail(firebaseUser.email||'')||'Utilisateur',role:'Utilisateur',pole:'',statut:'actif',permissions:[],dateCreation:new Date().toISOString(),dateModification:new Date().toISOString()};await setDoc(userDocRef,defaultUserData);setCurrentUser(defaultUserData);setLoading(false);}}catch(error){var _firebaseUser$email2;console.error('‚ùå Erreur de r√©cup√©ration utilisateur:',error);if(retries>0){console.log(`üîÑ Nouvelle tentative (${retries} restantes)...`);await new Promise(resolve=>setTimeout(resolve,1000));// Attente avant nouvelle tentative\nreturn fetchUserWithRetry(retries-1);}// G√©rer le cas o√π toutes les tentatives ont √©chou√©\nconst fallbackUser={id:firebaseUser.uid,uid:firebaseUser.uid,identifiant:((_firebaseUser$email2=firebaseUser.email)===null||_firebaseUser$email2===void 0?void 0:_firebaseUser$email2.split('@')[0])||'utilisateur',email:firebaseUser.email||'',nom:extractNameFromEmail(firebaseUser.email||'')||'Utilisateur',role:'Utilisateur',pole:'',statut:'actif',permissions:[],dateCreation:new Date().toISOString(),dateModification:new Date().toISOString()};setCurrentUser(fallbackUser);setLoading(false);}};await fetchUserWithRetry();}else{// Aucun utilisateur connect√©\nconsole.log('üö™ Aucun utilisateur connect√©');setCurrentUser(null);localStorage.removeItem('currentUser');setLoading(false);}}catch(error){console.error('‚ùå Erreur globale lors de la r√©cup√©ration utilisateur:',error);setCurrentUser(null);setLoading(false);}},error=>{console.error('‚ùå Erreur dans onAuthStateChanged:',error);setLoading(false);});// Nettoyer l'abonnement lors du d√©montage\nreturn()=>unsubscribe();},[]);// Valeur du contexte\nconst value={currentUser,loading,error,logout,hasPermission,isAllowedRoute,login};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:value,children:children});};export default AuthContext;","map":{"version":3,"names":["React","createContext","useContext","useState","useEffect","auth","db","onAuthStateChanged","signOut","signInWithEmailAndPassword","doc","setDoc","getDoc","jsx","_jsx","AuthContext","currentUser","loading","error","logout","hasPermission","isAllowedRoute","login","Error","useAuth","rolePermissions","Administrateur","Utilisateur","Coursier","routePermissions","allowedRoutes","AuthProvider","_ref","children","setCurrentUser","setLoading","setError","permission","_currentUser$email","email","toLowerCase","permissions","role","includes","route","_currentUser$email2","requiredPermission","routes","some","allowedRoute","startsWith","catch","console","extractNameFromEmail","parts","split","length","map","part","charAt","toUpperCase","slice","join","password","userCredential","firebaseUser","user","log","uid","displayName","userDocRef","userDoc","exists","firestoreData","data","userData","id","identifiant","nom","pole","statut","dateCreation","dateModification","errorMessage","code","unsubscribe","navigator","onLine","warn","cachedUser","localStorage","getItem","parsedUser","JSON","parse","fetchUserWithRetry","retries","arguments","undefined","enrichedUserData","Date","toISOString","setItem","stringify","_firebaseUser$email","defaultUserData","_firebaseUser$email2","Promise","resolve","setTimeout","fallbackUser","removeItem","value","Provider"],"sources":["C:/Users/LS_110/Documents/GitHub/inovie-SCAN-web-main/src/contexts/AuthContext.tsx"],"sourcesContent":["import React, { createContext, useContext, useState, useEffect } from 'react';\nimport { auth, db } from '../config/firebase';\nimport { onAuthStateChanged, signOut, User as FirebaseUser, signInWithEmailAndPassword } from 'firebase/auth';\nimport { collection, query, where, getDocs, doc, setDoc, getDoc } from 'firebase/firestore';\nimport { User } from '../types/User';\n\n// Interface pour le contexte d'authentification\ninterface AuthContextType {\n  currentUser: User | null;\n  loading: boolean;\n  error: string | null;\n  logout: () => Promise<void>;\n  hasPermission: (permission: string) => boolean;\n  isAllowedRoute: (route: string) => boolean;\n  login: (email: string, password: string) => Promise<User>;\n}\n\n// Cr√©ation du contexte avec une valeur par d√©faut\nconst AuthContext = createContext<AuthContextType>({\n  currentUser: null,\n  loading: true,\n  error: null,\n  logout: async () => {},\n  hasPermission: () => false,\n  isAllowedRoute: () => false,\n  login: async () => { throw new Error(\"Login function not implemented\"); },\n});\n\n// Hook personnalis√© pour utiliser le contexte d'authentification\nexport const useAuth = () => useContext(AuthContext);\n\n// D√©finition des permissions par r√¥le\nconst rolePermissions: Record<string, string[]> = {\n  Administrateur: [\n    'dashboard.view',\n    'passages.view', 'passages.create', 'passages.edit', 'passages.delete',\n    'sites.view', 'sites.create', 'sites.edit', 'sites.delete',\n    'tournees.view', 'tournees.create', 'tournees.edit', 'tournees.delete',\n    'vehicules.view', 'vehicules.create', 'vehicules.edit', 'vehicules.delete',\n    'users.view', 'users.create', 'users.edit', 'users.delete',\n    'init-passages.view',\n    'carte.view', 'carte.edit'\n  ],\n  Utilisateur: [\n    'dashboard.view',\n    'passages.view', 'passages.create', 'passages.edit',\n    'sites.view', 'sites.create', 'sites.edit',\n    'tournees.view', 'tournees.create', 'tournees.edit',\n    'vehicules.view', 'vehicules.create', 'vehicules.edit',\n    'users.view', 'users.create', 'users.edit',\n    'init-passages.view',\n    'carte.view'\n  ],\n  Coursier: [\n    'passages.view', 'passages.create', 'passages.edit'\n  ]\n};\n\n// Mapping des routes vers les permissions requises\nconst routePermissions: Record<string, string> = {\n  '/': 'dashboard.view',\n  '/passages': 'passages.view',\n  '/sites': 'sites.view',\n  '/tournees': 'tournees.view',\n  '/vehicules': 'vehicules.view',\n  '/admin/users': 'users.view',\n  '/admin': 'dashboard.view', // L'admin panel n√©cessite des permissions sp√©cifiques pour chaque onglet\n  '/init-passages': 'init-passages.view',\n  '/map': 'carte.view',\n};\n\n// D√©finition des routes autoris√©es par r√¥le\nconst allowedRoutes: Record<string, string[]> = {\n  Administrateur: ['/', '/passages', '/sites', '/tournees', '/vehicules', '/admin/users', '/init-passages'],\n  Utilisateur: ['/', '/passages', '/sites', '/tournees', '/vehicules', '/admin/users', '/init-passages'],\n  Coursier: ['/passages']\n};\n\n// Fournisseur du contexte d'authentification\nexport const AuthProvider: React.FC<{ children: React.ReactNode }> = ({ children }) => {\n  const [currentUser, setCurrentUser] = useState<User | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  // Fonction pour v√©rifier si l'utilisateur a une permission sp√©cifique\n  const hasPermission = (permission: string): boolean => {\n    if (!currentUser) return false;\n    \n    // Cas sp√©cial pour Micka√´l Volle (a toujours toutes les permissions)\n    if (currentUser.email?.toLowerCase() === 'mickael.volle@inovie.fr') {\n      return true;\n    }\n    \n    const permissions = rolePermissions[currentUser.role] || [];\n    return permissions.includes(permission);\n  };\n\n  // Fonction pour v√©rifier si l'utilisateur a acc√®s √† une route sp√©cifique\n  const isAllowedRoute = (route: string): boolean => {\n    if (!currentUser) return false;\n    \n    // Cas sp√©cial pour Micka√´l Volle (a acc√®s √† toutes les routes)\n    if (currentUser.email?.toLowerCase() === 'mickael.volle@inovie.fr') {\n      return true;\n    }\n    \n    // 1. V√©rifier si l'utilisateur a la permission sp√©cifique requise pour cette route\n    const requiredPermission = routePermissions[route];\n    if (requiredPermission && hasPermission(requiredPermission)) {\n      return true;\n    }\n    \n    // 2. V√©rifier les routes autoris√©es comme fallback\n    const routes = allowedRoutes[currentUser.role] || [];\n    \n    // V√©rifier si la route exacte est autoris√©e\n    if (routes.includes(route)) return true;\n    \n    // V√©rifier si une route parente est autoris√©e (pour les sous-routes)\n    return routes.some(allowedRoute => \n      route.startsWith(allowedRoute) && allowedRoute !== '/'\n    );\n  };\n\n  // Fonction de d√©connexion\n  const logout = async (): Promise<void> => {\n    try {\n      // Mettre √† jour l'√©tat imm√©diatement pour une exp√©rience utilisateur plus r√©active\n      setCurrentUser(null);\n      \n      // D√©clencher la d√©connexion Firebase en arri√®re-plan sans attendre\n      signOut(auth).catch(error => {\n        console.error('Erreur lors de la d√©connexion Firebase:', error);\n      });\n    } catch (error) {\n      console.error('Erreur lors de la d√©connexion:', error);\n      setError('Erreur lors de la d√©connexion');\n      \n      // En cas d'erreur, continuer en for√ßant la d√©connexion c√¥t√© client\n      setCurrentUser(null);\n    }\n  };\n\n  // Fonction pour extraire le pr√©nom et nom √† partir de l'email\n  const extractNameFromEmail = (email: string): string => {\n    const parts = email.split('@')[0].split('.');\n    if (parts.length > 1) {\n      // Cas o√π l'email est prenom.nom@domaine.com\n      return parts.map(part => \n        part.charAt(0).toUpperCase() + part.slice(1)\n      ).join(' ');\n    }\n    // Sinon, utiliser la partie avant @\n    return parts[0].split('-').map(part => \n      part.charAt(0).toUpperCase() + part.slice(1)\n    ).join(' ');\n  };\n\n  const login = async (email: string, password: string): Promise<User> => {\n    try {\n      setLoading(true);\n      setError(null);\n\n      // Connexion avec Firebase Auth\n      const userCredential = await signInWithEmailAndPassword(auth, email, password);\n      const firebaseUser = userCredential.user;\n\n      console.log('üîç D√©tails de l\\'utilisateur Firebase:', {\n        uid: firebaseUser.uid,\n        email: firebaseUser.email,\n        displayName: firebaseUser.displayName\n      });\n\n      // Rechercher l'utilisateur dans Firestore\n      const userDocRef = doc(db, 'users', firebaseUser.uid);\n      const userDoc = await getDoc(userDocRef);\n\n      if (!userDoc.exists()) {\n        // MODIFICATION : Bloquer la cr√©ation automatique\n        console.error('‚ùå Aucun compte utilisateur trouv√©. Veuillez contacter l\\'administrateur.');\n        throw new Error('Compte utilisateur non trouv√©. Contactez votre administrateur.');\n      }\n\n      const firestoreData = userDoc.data();\n      console.log('üîç Donn√©es Firestore de l\\'utilisateur:', firestoreData);\n\n      const userData: User = {\n        id: userDoc.id,\n        identifiant: firestoreData.identifiant || email.split('@')[0],\n        email: firestoreData.email || email,\n        nom: firestoreData.nom || \n             firestoreData.displayName || \n             firebaseUser.displayName || \n             extractNameFromEmail(email),\n        role: firestoreData.role || 'Utilisateur',\n        pole: firestoreData.pole || '',\n        statut: firestoreData.statut || 'actif',\n        uid: firebaseUser.uid,\n        permissions: firestoreData.permissions || [],\n        dateCreation: firestoreData.dateCreation,\n        dateModification: firestoreData.dateModification\n      };\n\n      console.log('üè∑Ô∏è Nom d\\'utilisateur final:', userData.nom);\n\n      // Cas sp√©cial pour Micka√´l Volle\n      if (email.toLowerCase() === 'mickael.volle@inovie.fr') {\n        userData.role = 'Administrateur';\n        userData.pole = 'Informatique';\n        userData.permissions = rolePermissions['Administrateur'];\n      }\n\n      console.log('üë§ Donn√©es utilisateur finales:', userData);\n      setCurrentUser(userData);\n      return userData;\n    } catch (error: any) {\n      console.error('Erreur lors de la connexion:', error);\n      let errorMessage = 'Erreur lors de la connexion';\n      \n      if (error.code === 'auth/invalid-credential') {\n        errorMessage = 'Compte non trouv√© ou identifiants incorrects';\n      } else if (error.code === 'auth/too-many-requests') {\n        errorMessage = 'Trop de tentatives de connexion. Veuillez r√©essayer plus tard.';\n      }\n      \n      setError(errorMessage);\n      throw new Error(errorMessage);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Effet pour g√©rer l'√©tat d'authentification\n  useEffect(() => {\n    console.log(\"‚úÖ Initialisation du gestionnaire d'authentification Firebase\");\n    \n    const unsubscribe = onAuthStateChanged(auth, async (firebaseUser) => {\n      console.log('üîç √âtat de l\\'authentification chang√©:', firebaseUser ? firebaseUser.email : 'Aucun utilisateur connect√©');\n      \n      try {\n        if (firebaseUser) {\n          // V√©rifier la connectivit√© r√©seau\n          if (!navigator.onLine) {\n            console.warn('‚ö†Ô∏è Mode hors ligne d√©tect√©. Utilisation des donn√©es en cache.');\n            const cachedUser = localStorage.getItem('currentUser');\n            if (cachedUser) {\n              const parsedUser = JSON.parse(cachedUser);\n              setCurrentUser(parsedUser);\n              setLoading(false);\n              return;\n            }\n          }\n\n          // Configuration de la persistance r√©seau avec des tentatives de r√©cup√©ration\n          const userDocRef = doc(db, 'users', firebaseUser.uid);\n          \n          // Ajouter un timeout et des tentatives de r√©cup√©ration\n          const fetchUserWithRetry = async (retries = 3) => {\n            try {\n              const userDoc = await getDoc(userDocRef);\n              \n              if (userDoc.exists()) {\n                const userData = userDoc.data() as User;\n                \n                // Enrichir les donn√©es utilisateur si n√©cessaire\n                const enrichedUserData: User = {\n                  ...userData,\n                  id: userDoc.id,\n                  uid: firebaseUser.uid,\n                  nom: userData.nom || \n                       firebaseUser.displayName || \n                       extractNameFromEmail(firebaseUser.email || '') || \n                       'Utilisateur',\n                  email: userData.email || firebaseUser.email || '',\n                  permissions: userData.permissions || [],\n                  dateModification: new Date().toISOString()\n                };\n\n                console.log('üë§ Donn√©es utilisateur r√©cup√©r√©es:', enrichedUserData);\n                \n                // Sauvegarder en cache local\n                localStorage.setItem('currentUser', JSON.stringify(enrichedUserData));\n                \n                setCurrentUser(enrichedUserData);\n                setLoading(false);\n              } else {\n                console.warn('‚ùå Aucun document utilisateur trouv√© pour l\\'UID:', firebaseUser.uid);\n                \n                // Cr√©er un document utilisateur par d√©faut\n                const defaultUserData: User = {\n                  id: firebaseUser.uid,\n                  uid: firebaseUser.uid,\n                  identifiant: firebaseUser.email?.split('@')[0] || 'utilisateur',\n                  email: firebaseUser.email || '',\n                  nom: extractNameFromEmail(firebaseUser.email || '') || 'Utilisateur',\n                  role: 'Utilisateur',\n                  pole: '',\n                  statut: 'actif',\n                  permissions: [],\n                  dateCreation: new Date().toISOString(),\n                  dateModification: new Date().toISOString()\n                };\n\n                await setDoc(userDocRef, defaultUserData);\n                setCurrentUser(defaultUserData);\n                setLoading(false);\n              }\n            } catch (error) {\n              console.error('‚ùå Erreur de r√©cup√©ration utilisateur:', error);\n              \n              if (retries > 0) {\n                console.log(`üîÑ Nouvelle tentative (${retries} restantes)...`);\n                await new Promise(resolve => setTimeout(resolve, 1000)); // Attente avant nouvelle tentative\n                return fetchUserWithRetry(retries - 1);\n              }\n              \n              // G√©rer le cas o√π toutes les tentatives ont √©chou√©\n              const fallbackUser: User = {\n                id: firebaseUser.uid,\n                uid: firebaseUser.uid,\n                identifiant: firebaseUser.email?.split('@')[0] || 'utilisateur',\n                email: firebaseUser.email || '',\n                nom: extractNameFromEmail(firebaseUser.email || '') || 'Utilisateur',\n                role: 'Utilisateur',\n                pole: '',\n                statut: 'actif',\n                permissions: [],\n                dateCreation: new Date().toISOString(),\n                dateModification: new Date().toISOString()\n              };\n\n              setCurrentUser(fallbackUser);\n              setLoading(false);\n            }\n          };\n\n          await fetchUserWithRetry();\n\n        } else {\n          // Aucun utilisateur connect√©\n          console.log('üö™ Aucun utilisateur connect√©');\n          setCurrentUser(null);\n          localStorage.removeItem('currentUser');\n          setLoading(false);\n        }\n      } catch (error) {\n        console.error('‚ùå Erreur globale lors de la r√©cup√©ration utilisateur:', error);\n        setCurrentUser(null);\n        setLoading(false);\n      }\n    }, (error) => {\n      console.error('‚ùå Erreur dans onAuthStateChanged:', error);\n      setLoading(false);\n    });\n\n    // Nettoyer l'abonnement lors du d√©montage\n    return () => unsubscribe();\n  }, []);\n\n  // Valeur du contexte\n  const value: AuthContextType = {\n    currentUser,\n    loading,\n    error,\n    logout,\n    hasPermission,\n    isAllowedRoute,\n    login\n  };\n\n  return (\n    <AuthContext.Provider value={value}>\n      {children}\n    </AuthContext.Provider>\n  );\n};\n\nexport default AuthContext; \r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}