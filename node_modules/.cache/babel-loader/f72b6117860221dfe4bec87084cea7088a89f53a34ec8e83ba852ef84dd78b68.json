{"ast":null,"code":"import React,{useEffect,useState,useCallback}from'react';import{createBrowserRouter,RouterProvider,Outlet,Navigate,useNavigate}from'react-router-dom';import{AuthProvider,useAuth}from'./contexts/AuthContext';import{SelasProvider}from'./contexts/SelasContext';import LoginScreen from'./components/LoginScreen';import Dashboard from'./components/Dashboard';import Passages from'./components/Passages';import Sites from'./components/Sites';import Tournees from'./components/Tournees';import Vehicules from'./components/Vehicules';import UserManagement from'./components/UserManagement';import InitPassages from'./components/InitPassages';import MapView from'./components/MapView';import ProtectedRoute from'./components/ProtectedRoute';import Navbar from'./components/Navbar';import AdminPanel from'./components/AdminPanel';import VehicleManagement from'./pages/VehicleManagement';import'./App.css';import{SnackbarProvider}from'notistack';import{RoleService,canAccessPage}from'./services/RoleService';import{PAGES}from'./utils/pageAccessUtils';import TourneeDetails from'./components/TourneeDetails';// Composant principal de l'application\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const App=()=>{const{currentUser,loading,error,logout}=useAuth();const[roles,setRoles]=useState([]);const[rolesLoading,setRolesLoading]=useState(true);const[rolesError,setRolesError]=useState(false);// Fonction pour charger les rôles\nconst fetchRoles=useCallback(async()=>{setRolesLoading(true);try{const roleService=RoleService.getInstance();const fetchedRoles=await roleService.getRoles();console.log('App - Rôles chargés depuis Firestore:',fetchedRoles);// Vérifier les accès pour le rôle de l'utilisateur courant si connecté\nif(currentUser!==null&&currentUser!==void 0&&currentUser.role){console.log('App - Utilisateur connecté avec le rôle:',currentUser.role);console.log('App - Accès aux pages:');Object.values(PAGES).forEach(page=>{const hasAccess=canAccessPage(currentUser.role,page);console.log(`- ${page}: ${hasAccess?'OUI':'NON'}`);});}setRoles(fetchedRoles);}catch(error){console.error('Erreur lors du chargement des rôles:',error);setRolesError(true);}finally{setRolesLoading(false);}},[currentUser]);// Charger les rôles dynamiquement\nuseEffect(()=>{fetchRoles();// Écouter les changements de rôles\nconst roleService=RoleService.getInstance();const handleRoleChange=()=>{console.log('App - Changement de rôles détecté, rechargement...');fetchRoles();};roleService.addRoleChangeListener(handleRoleChange);return()=>{roleService.removeRoleChangeListener(handleRoleChange);};},[fetchRoles]);if(loading||rolesLoading){return/*#__PURE__*/_jsx(LoadingSpinner,{});}if(error){return/*#__PURE__*/_jsxs(\"div\",{className:\"error-container\",style:{padding:'20px',margin:'20px',backgroundColor:'#ffebee',border:'1px solid #f44336',borderRadius:'4px',color:'#d32f2f'},children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Erreur d'authentification\"}),/*#__PURE__*/_jsx(\"p\",{children:error}),/*#__PURE__*/_jsx(\"p\",{children:\"Veuillez rafra\\xEEchir la page ou contacter l'administrateur.\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>window.location.reload(),style:{padding:'8px 16px',backgroundColor:'#d32f2f',color:'white',border:'none',borderRadius:'4px',cursor:'pointer'},children:\"Rafra\\xEEchir la page\"})]});}const isAuthenticated=!!currentUser;const userRole=(currentUser===null||currentUser===void 0?void 0:currentUser.role)||'Utilisateur';const router=createAppRouter(isAuthenticated,userRole,currentUser,logout,roles);return/*#__PURE__*/_jsx(AuthProvider,{children:/*#__PURE__*/_jsx(SelasProvider,{children:/*#__PURE__*/_jsx(SnackbarProvider,{maxSnack:3,children:/*#__PURE__*/_jsx(RouterProvider,{router:router,future:{v7_startTransition:true}})})})});};// Composant pour afficher un spinner de chargement\nconst LoadingSpinner=()=>{return/*#__PURE__*/_jsxs(\"div\",{className:\"loading-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Chargement de l'application...\"})]});};// Composant Layout pour les routes authentifiées\nconst AppLayout=_ref=>{let{user,logout}=_ref;const navigate=useNavigate();// Si l'utilisateur n'est pas défini, rediriger vers la page de connexion\nuseEffect(()=>{if(!user){console.log(\"AppLayout: Utilisateur non défini, redirection...\");navigate('/');}},[user,navigate]);// Si pas d'utilisateur, ne pas rendre le contenu\nif(!user){return/*#__PURE__*/_jsx(LoadingSpinner,{});}return/*#__PURE__*/_jsxs(\"div\",{className:\"app\",children:[/*#__PURE__*/_jsx(Navbar,{user:user,onLogout:logout}),/*#__PURE__*/_jsx(\"main\",{children:/*#__PURE__*/_jsx(Outlet,{})})]});};// Configuration du routeur avec les drapeaux pour React Router v7\nconst createAppRouter=(isAuthenticated,userRole,currentUser,logout,roles)=>{// Routes pour les utilisateurs authentifiés\nconst authenticatedRoutes=[{path:'/',element:/*#__PURE__*/_jsx(AppLayout,{user:currentUser,logout:logout}),children:[{path:'',element:/*#__PURE__*/_jsx(ProtectedRoute,{userRole:userRole,allowedRoles:['Administrateur','Utilisateur','default'],requiredPermissions:['dashboard.view'],pageName:PAGES.DASHBOARD,roles:roles,children:/*#__PURE__*/_jsx(Dashboard,{})})},{path:'passages',element:/*#__PURE__*/_jsx(ProtectedRoute,{userRole:userRole,allowedRoles:['Administrateur','Utilisateur','Coursier','default'],requiredPermissions:['passages.view'],pageName:PAGES.PASSAGES,roles:roles,children:/*#__PURE__*/_jsx(Passages,{})})},{path:'passages/:id',element:/*#__PURE__*/_jsx(ProtectedRoute,{userRole:userRole,allowedRoles:['Administrateur','Utilisateur','Coursier','default'],requiredPermissions:['passages.view'],pageName:PAGES.PASSAGE_DETAILS,roles:roles,children:/*#__PURE__*/_jsx(Passages,{})})},{path:'sites',element:/*#__PURE__*/_jsx(ProtectedRoute,{userRole:userRole,allowedRoles:['Administrateur','Utilisateur','default'],requiredPermissions:['sites.view'],pageName:PAGES.SITES,roles:roles,children:/*#__PURE__*/_jsx(Sites,{})})},{path:'tournees',element:/*#__PURE__*/_jsx(ProtectedRoute,{userRole:userRole,allowedRoles:['Administrateur','Utilisateur','default'],requiredPermissions:['tournees.view'],pageName:PAGES.TOURNEES,roles:roles,children:/*#__PURE__*/_jsx(Tournees,{})})},{path:'tournees/:id',element:/*#__PURE__*/_jsx(ProtectedRoute,{userRole:userRole,allowedRoles:['Administrateur','Utilisateur','Coursier','default'],requiredPermissions:['tournees.view'],pageName:PAGES.TOURNEE_DETAILS,roles:roles,children:/*#__PURE__*/_jsx(TourneeDetails,{})})},{path:'vehicules',element:/*#__PURE__*/_jsx(ProtectedRoute,{userRole:userRole,allowedRoles:['Administrateur','Utilisateur','default'],requiredPermissions:['vehicules.view'],pageName:PAGES.VEHICULES,roles:roles,children:/*#__PURE__*/_jsx(Vehicules,{})})},{path:'admin/users',element:/*#__PURE__*/_jsx(ProtectedRoute,{userRole:userRole,allowedRoles:['Administrateur','Utilisateur','Coursier','Manager','default'],requiredPermissions:['users.view'],pageName:PAGES.USER_MANAGEMENT,roles:roles,children:/*#__PURE__*/_jsx(UserManagement,{})})},{path:'admin',element:/*#__PURE__*/_jsx(ProtectedRoute,{userRole:userRole,allowedRoles:['Administrateur'],requiredPermissions:['dashboard.view'],pageName:PAGES.ADMINISTRATION,roles:roles,children:/*#__PURE__*/_jsx(AdminPanel,{})})},{path:'init-passages',element:/*#__PURE__*/_jsx(ProtectedRoute,{userRole:userRole,allowedRoles:['Administrateur','Utilisateur'],requiredPermissions:['init-passages.view'],pageName:PAGES.PASSAGES,roles:roles,children:/*#__PURE__*/_jsx(InitPassages,{})})},{path:'map',element:/*#__PURE__*/_jsx(ProtectedRoute,{userRole:userRole,allowedRoles:['Administrateur','Utilisateur'],requiredPermissions:['carte.view'],pageName:PAGES.CARTE,roles:roles,children:/*#__PURE__*/_jsx(MapView,{})})},{path:'marker-preferences',element:/*#__PURE__*/_jsx(ProtectedRoute,{userRole:userRole,allowedRoles:['Administrateur'],requiredPermissions:['marqueurs.edit'],pageName:PAGES.ADMINISTRATION,roles:roles,children:/*#__PURE__*/_jsx(Navigate,{to:\"/admin?tab=5\",replace:true})})},{path:'vehicles',element:/*#__PURE__*/_jsx(ProtectedRoute,{userRole:userRole,allowedRoles:['Administrateur','Utilisateur','default'],requiredPermissions:['vehicules.view'],pageName:PAGES.VEHICULES,roles:roles,children:/*#__PURE__*/_jsx(VehicleManagement,{})})},{path:'*',element:userRole==='Coursier'?/*#__PURE__*/_jsx(Navigate,{to:\"/passages\",replace:true}):/*#__PURE__*/_jsx(Navigate,{to:\"/\",replace:true})}]}];// Routes pour les utilisateurs non authentifiés\nconst unauthenticatedRoutes=[{path:'/',element:/*#__PURE__*/_jsx(LoginScreen,{})},{path:'/login',element:/*#__PURE__*/_jsx(LoginScreen,{})},{path:'/reset-password',element:/*#__PURE__*/_jsx(LoginScreen,{})},{path:'*',element:/*#__PURE__*/_jsx(Navigate,{to:\"/\",replace:true})}];return createBrowserRouter(isAuthenticated?authenticatedRoutes:unauthenticatedRoutes);};export default App;","map":{"version":3,"names":["React","useEffect","useState","useCallback","createBrowserRouter","RouterProvider","Outlet","Navigate","useNavigate","AuthProvider","useAuth","SelasProvider","LoginScreen","Dashboard","Passages","Sites","Tournees","Vehicules","UserManagement","InitPassages","MapView","ProtectedRoute","Navbar","AdminPanel","VehicleManagement","SnackbarProvider","RoleService","canAccessPage","PAGES","TourneeDetails","jsx","_jsx","jsxs","_jsxs","App","currentUser","loading","error","logout","roles","setRoles","rolesLoading","setRolesLoading","rolesError","setRolesError","fetchRoles","roleService","getInstance","fetchedRoles","getRoles","console","log","role","Object","values","forEach","page","hasAccess","handleRoleChange","addRoleChangeListener","removeRoleChangeListener","LoadingSpinner","className","style","padding","margin","backgroundColor","border","borderRadius","color","children","onClick","window","location","reload","cursor","isAuthenticated","userRole","router","createAppRouter","maxSnack","future","v7_startTransition","AppLayout","_ref","user","navigate","onLogout","authenticatedRoutes","path","element","allowedRoles","requiredPermissions","pageName","DASHBOARD","PASSAGES","PASSAGE_DETAILS","SITES","TOURNEES","TOURNEE_DETAILS","VEHICULES","USER_MANAGEMENT","ADMINISTRATION","CARTE","to","replace","unauthenticatedRoutes"],"sources":["C:/Users/LS_110/Documents/GitHub/inovie-SCAN-web-main/src/App.tsx"],"sourcesContent":["import React, { useEffect, Suspense, useState, useCallback } from 'react';\nimport { createBrowserRouter, RouterProvider, Outlet, Navigate, useNavigate } from 'react-router-dom';\nimport { AuthProvider, useAuth } from './contexts/AuthContext';\nimport { SelasProvider } from './contexts/SelasContext';\nimport LoginScreen from './components/LoginScreen';\nimport Dashboard from './components/Dashboard';\nimport Passages from './components/Passages';\nimport Sites from './components/Sites';\nimport Tournees from './components/Tournees';\nimport Vehicules from './components/Vehicules';\nimport UserManagement from './components/UserManagement';\nimport InitPassages from './components/InitPassages';\nimport MapView from './components/MapView';\nimport SharePointSync from './components/SharePointSync';\nimport MarkerPreferences from './components/MarkerPreferences';\nimport ProtectedRoute from './components/ProtectedRoute';\nimport Navbar from './components/Navbar';\nimport AdminPanel from './components/AdminPanel';\nimport VehicleManagement from './pages/VehicleManagement';\nimport './App.css';\nimport { SnackbarProvider } from 'notistack';\nimport LoadingScreen from './components/LoadingScreen';\nimport { RoleService, canAccessPage } from './services/RoleService';\nimport { PAGES } from './utils/pageAccessUtils';\nimport { Role } from './types/roles';\nimport { ListAlt, LocalShipping, DirectionsCar, LocationOn, People } from '@mui/icons-material';\nimport TourneeDetails from './components/TourneeDetails';\n\n// Composant principal de l'application\nconst App: React.FC = () => {\n  const { currentUser, loading, error, logout } = useAuth();\n  const [roles, setRoles] = useState<Role[]>([]);\n  const [rolesLoading, setRolesLoading] = useState(true);\n  const [rolesError, setRolesError] = useState(false);\n\n  // Fonction pour charger les rôles\n  const fetchRoles = useCallback(async () => {\n    setRolesLoading(true);\n    try {\n      const roleService = RoleService.getInstance();\n      const fetchedRoles = await roleService.getRoles();\n      console.log('App - Rôles chargés depuis Firestore:', fetchedRoles);\n      \n      // Vérifier les accès pour le rôle de l'utilisateur courant si connecté\n      if (currentUser?.role) {\n        console.log('App - Utilisateur connecté avec le rôle:', currentUser.role);\n        console.log('App - Accès aux pages:');\n        Object.values(PAGES).forEach(page => {\n          const hasAccess = canAccessPage(currentUser.role, page);\n          console.log(`- ${page}: ${hasAccess ? 'OUI' : 'NON'}`);\n        });\n      }\n      \n      setRoles(fetchedRoles);\n    } catch (error) {\n      console.error('Erreur lors du chargement des rôles:', error);\n      setRolesError(true);\n    } finally {\n      setRolesLoading(false);\n    }\n  }, [currentUser]);\n\n  // Charger les rôles dynamiquement\n  useEffect(() => {\n    fetchRoles();\n    \n    // Écouter les changements de rôles\n    const roleService = RoleService.getInstance();\n    const handleRoleChange = () => {\n      console.log('App - Changement de rôles détecté, rechargement...');\n      fetchRoles();\n    };\n    \n    roleService.addRoleChangeListener(handleRoleChange);\n    \n    return () => {\n      roleService.removeRoleChangeListener(handleRoleChange);\n    };\n  }, [fetchRoles]);\n\n  if (loading || rolesLoading) {\n    return <LoadingSpinner />;\n  }\n\n  if (error) {\n    return (\n      <div className=\"error-container\" style={{ \n        padding: '20px', \n        margin: '20px', \n        backgroundColor: '#ffebee', \n        border: '1px solid #f44336',\n        borderRadius: '4px',\n        color: '#d32f2f'\n      }}>\n        <h2>Erreur d'authentification</h2>\n        <p>{error}</p>\n        <p>Veuillez rafraîchir la page ou contacter l'administrateur.</p>\n        <button \n          onClick={() => window.location.reload()} \n          style={{\n            padding: '8px 16px',\n            backgroundColor: '#d32f2f',\n            color: 'white',\n            border: 'none',\n            borderRadius: '4px',\n            cursor: 'pointer'\n          }}\n        >\n          Rafraîchir la page\n        </button>\n      </div>\n    );\n  }\n\n  const isAuthenticated = !!currentUser;\n  const userRole = currentUser?.role || 'Utilisateur';\n\n  const router = createAppRouter(isAuthenticated, userRole, currentUser, logout, roles);\n\n  return (\n    <AuthProvider>\n      <SelasProvider>\n        <SnackbarProvider maxSnack={3}>\n          <RouterProvider \n            router={router} \n            future={{ v7_startTransition: true }}\n          />\n        </SnackbarProvider>\n      </SelasProvider>\n    </AuthProvider>\n  );\n};\n\n// Composant pour afficher un spinner de chargement\nconst LoadingSpinner = () => {\n  return (\n    <div className=\"loading-container\">\n      <div className=\"spinner\"></div>\n      <p>Chargement de l'application...</p>\n    </div>\n  );\n};\n\n// Composant Layout pour les routes authentifiées\nconst AppLayout: React.FC<{ user: any, logout: () => Promise<void> }> = ({ user, logout }) => {\n  const navigate = useNavigate();\n  \n  // Si l'utilisateur n'est pas défini, rediriger vers la page de connexion\n  useEffect(() => {\n    if (!user) {\n      console.log(\"AppLayout: Utilisateur non défini, redirection...\");\n      navigate('/');\n    }\n  }, [user, navigate]);\n  \n  // Si pas d'utilisateur, ne pas rendre le contenu\n  if (!user) {\n    return <LoadingSpinner />;\n  }\n  \n  return (\n    <div className=\"app\">\n      <Navbar user={user} onLogout={logout} />\n      <main>\n        <Outlet />\n      </main>\n    </div>\n  );\n};\n\n// Configuration du routeur avec les drapeaux pour React Router v7\nconst createAppRouter = (isAuthenticated: boolean, userRole: string, currentUser: any, logout: () => Promise<void>, roles: Role[]) => {\n  // Routes pour les utilisateurs authentifiés\n  const authenticatedRoutes = [\n    {\n      path: '/',\n      element: <AppLayout user={currentUser} logout={logout} />,\n      children: [\n        {\n          path: '',\n          element: (\n            <ProtectedRoute \n              userRole={userRole} \n              allowedRoles={['Administrateur', 'Utilisateur', 'default']}\n              requiredPermissions={['dashboard.view']}\n              pageName={PAGES.DASHBOARD}\n              roles={roles}\n            >\n              <Dashboard />\n            </ProtectedRoute>\n          )\n        },\n        {\n          path: 'passages',\n          element: (\n            <ProtectedRoute \n              userRole={userRole} \n              allowedRoles={['Administrateur', 'Utilisateur', 'Coursier', 'default']}\n              requiredPermissions={['passages.view']}\n              pageName={PAGES.PASSAGES}\n              roles={roles}\n            >\n              <Passages />\n            </ProtectedRoute>\n          )\n        },\n        {\n          path: 'passages/:id',\n          element: (\n            <ProtectedRoute \n              userRole={userRole} \n              allowedRoles={['Administrateur', 'Utilisateur', 'Coursier', 'default']}\n              requiredPermissions={['passages.view']}\n              pageName={PAGES.PASSAGE_DETAILS}\n              roles={roles}\n            >\n              <Passages />\n            </ProtectedRoute>\n          )\n        },\n        {\n          path: 'sites',\n          element: (\n            <ProtectedRoute \n              userRole={userRole} \n              allowedRoles={['Administrateur', 'Utilisateur', 'default']}\n              requiredPermissions={['sites.view']}\n              pageName={PAGES.SITES}\n              roles={roles}\n            >\n              <Sites />\n            </ProtectedRoute>\n          )\n        },\n        {\n          path: 'tournees',\n          element: (\n            <ProtectedRoute \n              userRole={userRole} \n              allowedRoles={['Administrateur', 'Utilisateur', 'default']}\n              requiredPermissions={['tournees.view']}\n              pageName={PAGES.TOURNEES}\n              roles={roles}\n            >\n              <Tournees />\n            </ProtectedRoute>\n          )\n        },\n        {\n          path: 'tournees/:id',\n          element: (\n            <ProtectedRoute \n              userRole={userRole} \n              allowedRoles={['Administrateur', 'Utilisateur', 'Coursier', 'default']}\n              requiredPermissions={['tournees.view']}\n              pageName={PAGES.TOURNEE_DETAILS}\n              roles={roles}\n            >\n              <TourneeDetails />\n            </ProtectedRoute>\n          )\n        },\n        {\n          path: 'vehicules',\n          element: (\n            <ProtectedRoute \n              userRole={userRole} \n              allowedRoles={['Administrateur', 'Utilisateur', 'default']}\n              requiredPermissions={['vehicules.view']}\n              pageName={PAGES.VEHICULES}\n              roles={roles}\n            >\n              <Vehicules />\n            </ProtectedRoute>\n          )\n        },\n        {\n          path: 'admin/users',\n          element: (\n            <ProtectedRoute \n              userRole={userRole} \n              allowedRoles={['Administrateur', 'Utilisateur', 'Coursier', 'Manager', 'default']}\n              requiredPermissions={['users.view']}\n              pageName={PAGES.USER_MANAGEMENT}\n              roles={roles}\n            >\n              <UserManagement />\n            </ProtectedRoute>\n          )\n        },\n        {\n          path: 'admin',\n          element: (\n            <ProtectedRoute \n              userRole={userRole} \n              allowedRoles={['Administrateur']}\n              requiredPermissions={['dashboard.view']}\n              pageName={PAGES.ADMINISTRATION}\n              roles={roles}\n            >\n              <AdminPanel />\n            </ProtectedRoute>\n          )\n        },\n        {\n          path: 'init-passages',\n          element: (\n            <ProtectedRoute \n              userRole={userRole} \n              allowedRoles={['Administrateur', 'Utilisateur']}\n              requiredPermissions={['init-passages.view']}\n              pageName={PAGES.PASSAGES}\n              roles={roles}\n            >\n              <InitPassages />\n            </ProtectedRoute>\n          )\n        },\n        {\n          path: 'map',\n          element: (\n            <ProtectedRoute \n              userRole={userRole} \n              allowedRoles={['Administrateur', 'Utilisateur']}\n              requiredPermissions={['carte.view']}\n              pageName={PAGES.CARTE}\n              roles={roles}\n            >\n              <MapView />\n            </ProtectedRoute>\n          )\n        },\n        {\n          path: 'marker-preferences',\n          element: (\n            <ProtectedRoute \n              userRole={userRole} \n              allowedRoles={['Administrateur']}\n              requiredPermissions={['marqueurs.edit']}\n              pageName={PAGES.ADMINISTRATION}\n              roles={roles}\n            >\n              <Navigate to=\"/admin?tab=5\" replace />\n            </ProtectedRoute>\n          )\n        },\n        {\n          path: 'vehicles',\n          element: (\n            <ProtectedRoute \n              userRole={userRole} \n              allowedRoles={['Administrateur', 'Utilisateur', 'default']}\n              requiredPermissions={['vehicules.view']}\n              pageName={PAGES.VEHICULES}\n              roles={roles}\n            >\n              <VehicleManagement />\n            </ProtectedRoute>\n          )\n        },\n        {\n          path: '*',\n          element: userRole === 'Coursier' ? \n            <Navigate to=\"/passages\" replace /> : \n            <Navigate to=\"/\" replace />\n        }\n      ]\n    }\n  ];\n\n  // Routes pour les utilisateurs non authentifiés\n  const unauthenticatedRoutes = [\n    {\n      path: '/',\n      element: <LoginScreen />\n    },\n    {\n      path: '/login',\n      element: <LoginScreen />\n    },\n    {\n      path: '/reset-password',\n      element: <LoginScreen />\n    },\n    {\n      path: '*',\n      element: <Navigate to=\"/\" replace />\n    }\n  ];\n\n  return createBrowserRouter(\n    isAuthenticated ? authenticatedRoutes : unauthenticatedRoutes\n  );\n};\n\nexport default App;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}