{"ast":null,"code":"import{initializeApp,getApps,getApp}from'firebase/app';import{getFirestore,enableIndexedDbPersistence,setLogLevel}from'firebase/firestore';import{getStorage}from'firebase/storage';import{getAuth,setPersistence,browserSessionPersistence}from'firebase/auth';// Configuration Firebase\nconst firebaseConfig={apiKey:import.meta.env.VITE_FIREBASE_API_KEY,authDomain:import.meta.env.VITE_FIREBASE_AUTH_DOMAIN,projectId:import.meta.env.VITE_FIREBASE_PROJECT_ID,storageBucket:import.meta.env.VITE_FIREBASE_STORAGE_BUCKET,messagingSenderId:import.meta.env.VITE_FIREBASE_MESSAGING_SENDER_ID,appId:import.meta.env.VITE_FIREBASE_APP_ID};// Configuration des logs\nsetLogLevel('warn');// URL de base pour les redirections\nconst PRODUCTION_URL='https://application-inovie-scan.web.app';// Configuration des liens de réinitialisation de mot de passe\nconst actionCodeSettings={url:`${PRODUCTION_URL}/login?reset=true`,handleCodeInApp:true,dynamicLinkDomain:null};// Liste des domaines autorisés\nconst ALLOWED_DOMAINS=['application-inovie-scan.web.app','application-inovie-scan.firebaseapp.com','localhost','127.0.0.1'];// Initialize Firebase only if it hasn't been initialized yet\nconst app=getApps().length===0?initializeApp(firebaseConfig):getApp();// Initialize services\nconst db=getFirestore(app);const storage=getStorage(app);const auth=getAuth(app);// Configuration de la persistance\ntry{// Persistance de l'authentification\nsetPersistence(auth,browserSessionPersistence).then(()=>{console.log('Persistance de session configurée');}).catch(error=>{console.error('Erreur de configuration de la persistance:',error);});// Persistance Firestore\nenableIndexedDbPersistence(db).then(()=>{console.log('✅ Persistance Firestore activée');}).catch(error=>{if(error.code==='failed-precondition'){console.warn('⚠️ La persistance Firestore ne peut pas être activée car plusieurs onglets sont ouverts');}else if(error.code==='unimplemented'){console.warn('⚠️ Le navigateur ne prend pas en charge la persistance Firestore');}});}catch(error){console.error('❌ Erreur lors de la configuration de la persistance',error);}// Fonction de gestion des erreurs Firebase\nconst handleFirebaseError=error=>{console.error('Erreur Firebase:',error);return error;};// Export services and utilities\nexport{db,storage,auth,PRODUCTION_URL,actionCodeSettings,ALLOWED_DOMAINS,handleFirebaseError};","map":{"version":3,"names":["initializeApp","getApps","getApp","getFirestore","enableIndexedDbPersistence","setLogLevel","getStorage","getAuth","setPersistence","browserSessionPersistence","firebaseConfig","apiKey","import","meta","env","VITE_FIREBASE_API_KEY","authDomain","VITE_FIREBASE_AUTH_DOMAIN","projectId","VITE_FIREBASE_PROJECT_ID","storageBucket","VITE_FIREBASE_STORAGE_BUCKET","messagingSenderId","VITE_FIREBASE_MESSAGING_SENDER_ID","appId","VITE_FIREBASE_APP_ID","PRODUCTION_URL","actionCodeSettings","url","handleCodeInApp","dynamicLinkDomain","ALLOWED_DOMAINS","app","length","db","storage","auth","then","console","log","catch","error","code","warn","handleFirebaseError"],"sources":["C:/Users/LS_110/Documents/GitHub/inovie-SCAN-web-main/src/config/firebase.ts"],"sourcesContent":["import { initializeApp, getApps, getApp } from 'firebase/app';\r\nimport { getFirestore, enableIndexedDbPersistence, setLogLevel } from 'firebase/firestore';\r\nimport { getStorage } from 'firebase/storage';\r\nimport { getAuth, setPersistence, browserSessionPersistence } from 'firebase/auth';\r\n\r\n// Configuration Firebase\r\nconst firebaseConfig = {\r\n  apiKey: import.meta.env.VITE_FIREBASE_API_KEY,\r\n  authDomain: import.meta.env.VITE_FIREBASE_AUTH_DOMAIN,\r\n  projectId: import.meta.env.VITE_FIREBASE_PROJECT_ID,\r\n  storageBucket: import.meta.env.VITE_FIREBASE_STORAGE_BUCKET,\r\n  messagingSenderId: import.meta.env.VITE_FIREBASE_MESSAGING_SENDER_ID,\r\n  appId: import.meta.env.VITE_FIREBASE_APP_ID\r\n};\r\n\r\n// Configuration des logs\r\nsetLogLevel('warn');\r\n\r\n// URL de base pour les redirections\r\nconst PRODUCTION_URL = 'https://application-inovie-scan.web.app';\r\n\r\n// Configuration des liens de réinitialisation de mot de passe\r\nconst actionCodeSettings = {\r\n  url: `${PRODUCTION_URL}/login?reset=true`,\r\n  handleCodeInApp: true,\r\n  dynamicLinkDomain: null\r\n};\r\n\r\n// Liste des domaines autorisés\r\nconst ALLOWED_DOMAINS = [\r\n  'application-inovie-scan.web.app',\r\n  'application-inovie-scan.firebaseapp.com',\r\n  'localhost',\r\n  '127.0.0.1'\r\n];\r\n\r\n// Initialize Firebase only if it hasn't been initialized yet\r\nconst app = getApps().length === 0 ? initializeApp(firebaseConfig) : getApp();\r\n\r\n// Initialize services\r\nconst db = getFirestore(app);\r\nconst storage = getStorage(app);\r\nconst auth = getAuth(app);\r\n\r\n// Configuration de la persistance\r\ntry {\r\n  // Persistance de l'authentification\r\n  setPersistence(auth, browserSessionPersistence)\r\n    .then(() => {\r\n      console.log('Persistance de session configurée');\r\n    })\r\n    .catch((error) => {\r\n      console.error('Erreur de configuration de la persistance:', error);\r\n    });\r\n\r\n  // Persistance Firestore\r\n  enableIndexedDbPersistence(db)\r\n    .then(() => {\r\n      console.log('✅ Persistance Firestore activée');\r\n    })\r\n    .catch((error) => {\r\n      if (error.code === 'failed-precondition') {\r\n        console.warn('⚠️ La persistance Firestore ne peut pas être activée car plusieurs onglets sont ouverts');\r\n      } else if (error.code === 'unimplemented') {\r\n        console.warn('⚠️ Le navigateur ne prend pas en charge la persistance Firestore');\r\n      }\r\n    });\r\n} catch (error) {\r\n  console.error('❌ Erreur lors de la configuration de la persistance', error);\r\n}\r\n\r\n// Fonction de gestion des erreurs Firebase\r\nconst handleFirebaseError = (error: any) => {\r\n  console.error('Erreur Firebase:', error);\r\n  return error;\r\n};\r\n\r\n// Export services and utilities\r\nexport { \r\n  db, \r\n  storage, \r\n  auth,\r\n  PRODUCTION_URL,\r\n  actionCodeSettings,\r\n  ALLOWED_DOMAINS,\r\n  handleFirebaseError\r\n}; \r\n"],"mappings":"AAAA,OAASA,aAAa,CAAEC,OAAO,CAAEC,MAAM,KAAQ,cAAc,CAC7D,OAASC,YAAY,CAAEC,0BAA0B,CAAEC,WAAW,KAAQ,oBAAoB,CAC1F,OAASC,UAAU,KAAQ,kBAAkB,CAC7C,OAASC,OAAO,CAAEC,cAAc,CAAEC,yBAAyB,KAAQ,eAAe,CAElF;AACA,KAAM,CAAAC,cAAc,CAAG,CACrBC,MAAM,CAAEC,MAAM,CAACC,IAAI,CAACC,GAAG,CAACC,qBAAqB,CAC7CC,UAAU,CAAEJ,MAAM,CAACC,IAAI,CAACC,GAAG,CAACG,yBAAyB,CACrDC,SAAS,CAAEN,MAAM,CAACC,IAAI,CAACC,GAAG,CAACK,wBAAwB,CACnDC,aAAa,CAAER,MAAM,CAACC,IAAI,CAACC,GAAG,CAACO,4BAA4B,CAC3DC,iBAAiB,CAAEV,MAAM,CAACC,IAAI,CAACC,GAAG,CAACS,iCAAiC,CACpEC,KAAK,CAAEZ,MAAM,CAACC,IAAI,CAACC,GAAG,CAACW,oBACzB,CAAC,CAED;AACApB,WAAW,CAAC,MAAM,CAAC,CAEnB;AACA,KAAM,CAAAqB,cAAc,CAAG,yCAAyC,CAEhE;AACA,KAAM,CAAAC,kBAAkB,CAAG,CACzBC,GAAG,CAAE,GAAGF,cAAc,mBAAmB,CACzCG,eAAe,CAAE,IAAI,CACrBC,iBAAiB,CAAE,IACrB,CAAC,CAED;AACA,KAAM,CAAAC,eAAe,CAAG,CACtB,iCAAiC,CACjC,yCAAyC,CACzC,WAAW,CACX,WAAW,CACZ,CAED;AACA,KAAM,CAAAC,GAAG,CAAG/B,OAAO,CAAC,CAAC,CAACgC,MAAM,GAAK,CAAC,CAAGjC,aAAa,CAACU,cAAc,CAAC,CAAGR,MAAM,CAAC,CAAC,CAE7E;AACA,KAAM,CAAAgC,EAAE,CAAG/B,YAAY,CAAC6B,GAAG,CAAC,CAC5B,KAAM,CAAAG,OAAO,CAAG7B,UAAU,CAAC0B,GAAG,CAAC,CAC/B,KAAM,CAAAI,IAAI,CAAG7B,OAAO,CAACyB,GAAG,CAAC,CAEzB;AACA,GAAI,CACF;AACAxB,cAAc,CAAC4B,IAAI,CAAE3B,yBAAyB,CAAC,CAC5C4B,IAAI,CAAC,IAAM,CACVC,OAAO,CAACC,GAAG,CAAC,mCAAmC,CAAC,CAClD,CAAC,CAAC,CACDC,KAAK,CAAEC,KAAK,EAAK,CAChBH,OAAO,CAACG,KAAK,CAAC,4CAA4C,CAAEA,KAAK,CAAC,CACpE,CAAC,CAAC,CAEJ;AACArC,0BAA0B,CAAC8B,EAAE,CAAC,CAC3BG,IAAI,CAAC,IAAM,CACVC,OAAO,CAACC,GAAG,CAAC,iCAAiC,CAAC,CAChD,CAAC,CAAC,CACDC,KAAK,CAAEC,KAAK,EAAK,CAChB,GAAIA,KAAK,CAACC,IAAI,GAAK,qBAAqB,CAAE,CACxCJ,OAAO,CAACK,IAAI,CAAC,yFAAyF,CAAC,CACzG,CAAC,IAAM,IAAIF,KAAK,CAACC,IAAI,GAAK,eAAe,CAAE,CACzCJ,OAAO,CAACK,IAAI,CAAC,kEAAkE,CAAC,CAClF,CACF,CAAC,CAAC,CACN,CAAE,MAAOF,KAAK,CAAE,CACdH,OAAO,CAACG,KAAK,CAAC,qDAAqD,CAAEA,KAAK,CAAC,CAC7E,CAEA;AACA,KAAM,CAAAG,mBAAmB,CAAIH,KAAU,EAAK,CAC1CH,OAAO,CAACG,KAAK,CAAC,kBAAkB,CAAEA,KAAK,CAAC,CACxC,MAAO,CAAAA,KAAK,CACd,CAAC,CAED;AACA,OACEP,EAAE,CACFC,OAAO,CACPC,IAAI,CACJV,cAAc,CACdC,kBAAkB,CAClBI,eAAe,CACfa,mBAAmB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}