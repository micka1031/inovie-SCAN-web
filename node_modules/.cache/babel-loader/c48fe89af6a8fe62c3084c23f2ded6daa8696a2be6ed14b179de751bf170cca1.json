{"ast":null,"code":"import React,{useEffect,useState}from'react';import{Select,Spin}from'antd';import{usePoles}from'../services/PoleService';import{jsx as _jsx}from\"react/jsx-runtime\";const{Option}=Select;/**\n * Composant de sélection de pôle réutilisable\n */const PoleSelector=_ref=>{let{value,onChange,placeholder='Sélectionner un pôle',style,disabled=false,allowClear=true,showSearch=true,className,required=false,filterBySelas=false,currentSelasId=null}=_ref;const{poles,loading,error}=usePoles();const[filteredPoles,setFilteredPoles]=useState([]);// Filtrer les pôles par SELAS si nécessaire\nuseEffect(()=>{if(filterBySelas&&currentSelasId){setFilteredPoles(poles.filter(pole=>pole.selasId===currentSelasId||!pole.selasId));}else{setFilteredPoles(poles);}},[poles,filterBySelas,currentSelasId]);const handleChange=value=>{if(onChange){onChange(value);}};if(error){console.error(\"Erreur lors du chargement des pôles:\",error);return/*#__PURE__*/_jsx(Select,{className:className,style:style,disabled:true,placeholder:\"Erreur de chargement\"});}return/*#__PURE__*/_jsx(Select,{className:className,value:value,onChange:handleChange,placeholder:placeholder,style:{width:200,...style},disabled:disabled||loading,allowClear:allowClear,showSearch:showSearch,filterOption:(input,option)=>{var _option$children;return(option===null||option===void 0?void 0:(_option$children=option.children)===null||_option$children===void 0?void 0:_option$children.toString().toLowerCase().indexOf(input.toLowerCase()))>=0;},notFoundContent:loading?/*#__PURE__*/_jsx(Spin,{size:\"small\"}):\"Aucun pôle trouvé\",children:filteredPoles.map(pole=>/*#__PURE__*/_jsx(Option,{value:pole.id,children:pole.nom},pole.id))});};export default PoleSelector;","map":{"version":3,"names":["React","useEffect","useState","Select","Spin","usePoles","jsx","_jsx","Option","PoleSelector","_ref","value","onChange","placeholder","style","disabled","allowClear","showSearch","className","required","filterBySelas","currentSelasId","poles","loading","error","filteredPoles","setFilteredPoles","filter","pole","selasId","handleChange","console","width","filterOption","input","option","_option$children","children","toString","toLowerCase","indexOf","notFoundContent","size","map","id","nom"],"sources":["C:/Users/LS_110/Documents/GitHub/inovie-SCAN-web-main/src/components/PoleSelector.tsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Select, Spin } from 'antd';\nimport { usePoles, Pole } from '../services/PoleService';\n\nconst { Option } = Select;\n\ninterface PoleSelectorProps {\n  value?: string;\n  onChange?: (value: string) => void;\n  placeholder?: string;\n  style?: React.CSSProperties;\n  disabled?: boolean;\n  allowClear?: boolean;\n  showSearch?: boolean;\n  className?: string;\n  required?: boolean;\n  filterBySelas?: boolean;\n  currentSelasId?: string | null;\n}\n\n/**\n * Composant de sélection de pôle réutilisable\n */\nconst PoleSelector: React.FC<PoleSelectorProps> = ({\n  value,\n  onChange,\n  placeholder = 'Sélectionner un pôle',\n  style,\n  disabled = false,\n  allowClear = true,\n  showSearch = true,\n  className,\n  required = false,\n  filterBySelas = false,\n  currentSelasId = null\n}) => {\n  const { poles, loading, error } = usePoles();\n  const [filteredPoles, setFilteredPoles] = useState<Pole[]>([]);\n  \n  // Filtrer les pôles par SELAS si nécessaire\n  useEffect(() => {\n    if (filterBySelas && currentSelasId) {\n      setFilteredPoles(poles.filter(pole => \n        pole.selasId === currentSelasId || !pole.selasId\n      ));\n    } else {\n      setFilteredPoles(poles);\n    }\n  }, [poles, filterBySelas, currentSelasId]);\n  \n  const handleChange = (value: string) => {\n    if (onChange) {\n      onChange(value);\n    }\n  };\n  \n  if (error) {\n    console.error(\"Erreur lors du chargement des pôles:\", error);\n    return (\n      <Select\n        className={className}\n        style={style}\n        disabled={true}\n        placeholder=\"Erreur de chargement\"\n      />\n    );\n  }\n  \n  return (\n    <Select\n      className={className}\n      value={value}\n      onChange={handleChange}\n      placeholder={placeholder}\n      style={{ width: 200, ...style }}\n      disabled={disabled || loading}\n      allowClear={allowClear}\n      showSearch={showSearch}\n      filterOption={(input, option) =>\n        option?.children?.toString().toLowerCase().indexOf(input.toLowerCase()) >= 0\n      }\n      notFoundContent={loading ? <Spin size=\"small\" /> : \"Aucun pôle trouvé\"}\n    >\n      {filteredPoles.map(pole => (\n        <Option key={pole.id} value={pole.id}>\n          {pole.nom}\n        </Option>\n      ))}\n    </Select>\n  );\n};\n\nexport default PoleSelector; \n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}